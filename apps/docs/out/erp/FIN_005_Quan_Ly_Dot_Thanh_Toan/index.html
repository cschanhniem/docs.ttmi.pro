<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/erp-docs/_next/static/css/4b73dfd0f7bdc629.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js"/><script src="/erp-docs/_next/static/chunks/7384d974-8b753aa07a0575a2.js" async=""></script><script src="/erp-docs/_next/static/chunks/381-1b6d0728bba7b8e7.js" async=""></script><script src="/erp-docs/_next/static/chunks/main-app-5d87a2fd0f4f2f33.js" async=""></script><script src="/erp-docs/_next/static/chunks/d550ec10-485e3f71f5def856.js" async=""></script><script src="/erp-docs/_next/static/chunks/993-1b6a71072be86da4.js" async=""></script><script src="/erp-docs/_next/static/chunks/410-1ece2fcedd156d2f.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/layout-b6ef60bec0ff2cf2.js" async=""></script><title>undefined | ERP Documentation</title><meta name="keywords" content="documentation,ERP,technical,mermaid,markdown"/><meta name="next-size-adjust"/><script src="/erp-docs/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_985585"><div class="min-h-screen flex items-center justify-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><script src="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[5214,[],\"\"]\n5:I[3040,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"DocLayout\"]\n6:I[1276,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"MDXContent\"]\n8:I[6472,[],\"\"]\na:I[9190,[],\"\"]\nb:I[4550,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"ThemeProvider\"]\nc:I[8910,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"AuthProvider\"]\ne:I[3013,[],\"\"]\n7:T2623,"])</script><script>self.__next_f.push([1,"# FIN_005_Quản Lý Đợt Thanh Toán\n\n*Phiên bản: 1.0*  \n*Người tạo: ChatGPT*  \n*Ngày tạo: 13/05/2025*  \n*Cập nhật lần cuối: 13/05/2025*  \n*Người cập nhật: ChatGPT*\n\n## 1. Tổng Quan Nghiệp Vụ\n\n### 1.1. Mô Tả Nghiệp Vụ\nQuy trình Quản Lý Đợt Thanh Toán là một phần quan trọng trong phân hệ Tài Chính của hệ thống ERP, cho phép doanh nghiệp thiết lập và quản lý các đợt thanh toán theo giai đoạn hoặc kỳ hạn. Quy trình này giúp theo dõi, quản lý và đảm bảo việc thanh toán được thực hiện đúng tiến độ và kế hoạch.\n\n### 1.2. Phạm Vi Áp Dụng\n- **Phòng Tài Chính**: Quản lý và theo dõi đợt thanh toán\n- **Phòng Kế Toán**: Thực hiện thanh toán theo đợt\n- **Ban Giám Đốc**: Phê duyệt kế hoạch thanh toán\n- **Các Bộ Phận**: Đề xuất kế hoạch thanh toán\n\n### 1.3. Định Nghĩa Thuật Ngữ\n| Thuật ngữ | Định nghĩa |\n|-----------|------------|\n| Đợt thanh toán | Kỳ thanh toán theo giai đoạn hoặc định kỳ |\n| Kỳ hạn thanh toán | Thời hạn phải hoàn thành thanh toán |\n| Tiến độ thanh toán | Trạng thái hoàn thành của đợt thanh toán |\n| STT | Số thứ tự của đợt thanh toán |\n\n### 1.4. Tài Liệu Liên Quan\n| STT | Mã tài liệu | Tên tài liệu | Mô tả |\n|-----|-------------|--------------|-------|\n| 1   | FIN_002 | Quản Lý Thanh Toán | Quy trình quản lý thanh toán |\n| 2   | FIN_003 | Quản Lý Khoản Vay | Quy trình quản lý khoản vay |\n| 3   | FIN_006 | Quản Lý Điều Kiện Thanh Toán | Quy trình quản lý điều kiện thanh toán |\n\n## 2. Quy Trình Nghiệp Vụ\n\n### 2.1. Tổng Quan Quy Trình\nQuy trình Quản Lý Đợt Thanh Toán bao gồm các phần chính:\n1. Thiết lập đợt thanh toán\n2. Phân bổ số tiền thanh toán\n3. Theo dõi tiến độ thanh toán\n4. Thực hiện thanh toán\n5. Kiểm soát và báo cáo\n\n### 2.2. Sơ Đồ Quy Trình (Business Flow)\n\n```mermaid\nflowchart TD\n    A[Bắt đầu] --\u003e B[Tạo đợt thanh toán]\n    B --\u003e C[Thiết lập thông tin]\n    C --\u003e D[Phân bổ số tiền]\n    D --\u003e E[Lên lịch thanh toán]\n    E --\u003e F[Theo dõi tiến độ]\n    F --\u003e G{Kiểm tra thời hạn}\n    G --\u003e|Đến hạn| H[Thực hiện thanh toán]\n    G --\u003e|Chưa đến hạn| F\n    H --\u003e I[Cập nhật trạng thái]\n    I --\u003e J[Kết thúc]\n```\n\n### 2.3. Chi Tiết Các Bước Quy Trình\n\n#### 2.3.1. Thiết Lập Đợt Thanh Toán\n- **Mô tả**: Tạo mới đợt thanh toán trong hệ thống\n- **Đầu vào**: \n  - Mã đợt thanh toán\n  - Tên đợt thanh toán\n  - Thời hạn thanh toán\n  - Số tiền thanh toán\n- **Đầu ra**: Đợt thanh toán được thiết lập\n- **Người thực hiện**: Cán bộ tài chính\n- **Điều kiện tiên quyết**: Có kế hoạch thanh toán\n- **Xử lý ngoại lệ**: Kiểm tra trùng mã đợt thanh toán\n\n#### 2.3.2. Theo Dõi Tiến Độ Thanh Toán\n- **Mô tả**: Theo dõi và cập nhật tiến độ thanh toán\n- **Đầu vào**: \n  - Mã đợt thanh toán\n  - Trạng thái thanh toán\n  - Số tiền đã thanh toán\n- **Đầu ra**: Tiến độ được cập nhật\n- **Người thực hiện**: Kế toán viên\n- **Điều kiện tiên quyết**: Có đợt thanh toán\n- **Xử lý ngoại lệ**: Kiểm tra tính hợp lệ của số tiền\n\n### 2.4. Sơ Đồ Tuần Tự (Sequence Diagram)\n\n```mermaid\nsequenceDiagram\n    participant U as Người dùng\n    participant P as Quản lý Đợt thanh toán\n    participant S as Kiểm tra tiến độ\n    participant T as Thực hiện thanh toán\n    \n    U-\u003e\u003eP: Tạo đợt thanh toán\n    P-\u003e\u003eS: Thiết lập tiến độ\n    S--\u003e\u003eP: Xác nhận thiết lập\n    P--\u003e\u003eU: Thông báo thành công\n    loop Theo dõi tiến độ\n        S-\u003e\u003eP: Kiểm tra thời hạn\n        alt Đến hạn thanh toán\n            P-\u003e\u003eT: Yêu cầu thanh toán\n            T--\u003e\u003eP: Xác nhận thanh toán\n            P--\u003e\u003eU: Thông báo hoàn thành\n        else Chưa đến hạn\n            P--\u003e\u003eU: Cập nhật tiến độ\n        end\n    end\n```\n\n### 2.5. Luồng Nghiệp Vụ Thay Thế\n1. **Điều chỉnh đợt thanh toán**:\n   - Thay đổi thời hạn\n   - Điều chỉnh số tiền\n   - Cập nhật trạng thái\n   - Thông báo các bên liên quan\n\n2. **Xử lý thanh toán trễ hạn**:\n   - Ghi nhận quá hạn\n   - Tính phí phạt nếu có\n   - Điều chỉnh kế hoạch\n   - Thông báo bên liên quan\n\n## 3. Yêu Cầu Chức Năng\n\n### 3.1. Danh Sách Chức Năng\n\n| STT | Mã chức năng | Tên chức năng | Mô tả | Độ ưu tiên |\n|-----|--------------|---------------|-------|------------|\n| 1   | PAY_INS_001 | Quản lý đợt thanh toán | Quản lý thông tin đợt thanh toán | Cao |\n| 2   | PAY_INS_002 | Theo dõi tiến độ | Theo dõi tiến độ thanh toán | Cao |\n| 3   | PAY_INS_003 | Thực hiện thanh toán | Xử lý thanh toán theo đợt | Cao |\n| 4   | PAY_INS_004 | Báo cáo đợt thanh toán | Xuất báo cáo tổng hợp | Trung bình |\n\n### 3.2. Chi Tiết Chức Năng\n\n#### 3.2.1. PAY_INS_001: Quản lý đợt thanh toán\n- **Mô tả**: Quản lý thông tin đợt thanh toán\n- **Đầu vào**: Thông tin đợt thanh toán\n- **Đầu ra**: Đợt thanh toán được tạo/cập nhật\n- **Điều kiện tiên quyết**: Quyền quản lý thanh toán\n- **Luồng xử lý chính**:\n  1. Nhập thông tin đợt thanh toán\n  2. Kiểm tra tính hợp lệ\n  3. Lưu vào hệ thống\n- **Luồng xử lý thay thế/ngoại lệ**:\n  1. Kiểm tra trùng mã\n  2. Xử lý lỗi validate\n- **Giao diện liên quan**: Màn hình quản lý đợt thanh toán\n\n## 4. Thiết Kế Kỹ Thuật\n\n### 4.1. Kiến Trúc Hệ Thống\n\n```mermaid\nflowchart TD\n    A[Web Interface] --\u003e B[API Gateway]\n    B --\u003e C[Payment Installment Service]\n    B --\u003e D[Schedule Service]\n    B --\u003e E[Payment Service]\n    C --\u003e F[(Database)]\n    D --\u003e F\n    E --\u003e F\n```\n\n### 4.2. API Endpoints\n\n#### 4.2.1. Quản Lý Đợt Thanh Toán\n- **Mô tả**: API quản lý đợt thanh toán\n- **URL**: \n  - `GET /api/v1/payment-installments/`\n  - `POST /api/v1/payment-installments/`\n  - `PUT /api/v1/payment-installments/{uuid}/`\n  - `DELETE /api/v1/payment-installments/{uuid}/`\n\n#### 4.2.2. Quản Lý Tiến Độ\n- **Mô tả**: API quản lý tiến độ thanh toán\n- **URL**:\n  - `GET /api/v1/payment-schedules/`\n  - `POST /api/v1/payment-schedules/`\n  - `PUT /api/v1/payment-schedules/{uuid}/`\n  - `DELETE /api/v1/payment-schedules/{uuid}/`\n\n### 4.3. Service Logic\n\n#### 4.3.1. Payment Installment Service\n- **Mô tả**: Xử lý logic đợt thanh toán\n- **Chức năng chính**:\n  1. Quản lý đợt thanh toán\n  2. Theo dõi tiến độ\n  3. Kiểm soát thanh toán\n- **Các dependencies**:\n  1. Database Service\n  2. Validation Service\n  3. Payment Service\n- **Sơ đồ luồng xử lý**:\n\n```mermaid\nflowchart TD\n    A[Nhận request] --\u003e B[Validate dữ liệu]\n    B --\u003e C{Dữ liệu hợp lệ?}\n    C --\u003e|Có| D[Xử lý nghiệp vụ]\n    C --\u003e|Không| E[Trả về lỗi]\n    D --\u003e F[Cập nhật DB]\n    F --\u003e G[Gửi thông báo]\n    G --\u003e H[Trả về kết quả]\n    E --\u003e H\n```\n\n### 4.4. Mô Hình Dữ Liệu\n\n#### 4.4.1. Entity Relationship Diagram (ERD)\n\n```mermaid\nerDiagram\n    DOT_THANH_TOAN ||--o{ TIEN_DO : contains\n    DOT_THANH_TOAN {\n        uuid id\n        string ma_dtt\n        string ten_dtt\n        string ten_dtt2\n        int stt\n        boolean trang_thai\n    }\n    TIEN_DO {\n        uuid id\n        uuid dot_thanh_toan_id\n        datetime thoi_han\n        decimal so_tien\n        string trang_thai\n    }\n```\n\n#### 4.4.2. Chi Tiết Bảng Dữ Liệu\n\n##### Bảng: DOT_THANH_TOAN\n- **Mô tả**: Lưu trữ thông tin đợt thanh toán\n- **Các trường chính**:\n  - id: UUID (Khóa chính)\n  - ma_dtt: VARCHAR(50)\n  - ten_dtt: VARCHAR(255)\n  - stt: INTEGER\n\n##### Bảng: TIEN_DO\n- **Mô tả**: Lưu trữ thông tin tiến độ thanh toán\n- **Các trường chính**:\n  - id: UUID (Khóa chính)\n  - dot_thanh_toan_id: UUID (Khóa ngoại)\n  - thoi_han: DATETIME\n  - trang_thai: VARCHAR(50)\n\n## 5. Kế Hoạch Kiểm Thử\n\n### 5.1. Phạm Vi Kiểm Thử\n- Kiểm thử tạo/sửa/xóa đợt thanh toán\n- Kiểm thử theo dõi tiến độ\n- Kiểm thử thực hiện thanh toán\n- Kiểm thử báo cáo đợt thanh toán\n\n### 5.2. Kịch Bản Kiểm Thử\n\n| STT | Mã kịch bản | Tên kịch bản | Mô tả | Điều kiện tiên quyết | Các bước | Kết quả mong đợi |\n|-----|------------|--------------|-------|---------------------|----------|-----------------|\n| 1   | TC001 | Tạo đợt thanh toán | Tạo mới đợt thanh toán | Đăng nhập admin | 1. Nhập thông tin\u003cbr\u003e2. Submit form | Tạo thành công |\n| 2   | TC002 | Cập nhật tiến độ | Cập nhật tiến độ thanh toán | Có đợt thanh toán | 1. Chọn đợt thanh toán\u003cbr\u003e2. Cập nhật tiến độ\u003cbr\u003e3. Submit | Cập nhật thành công |\n\n## 6. Phụ Lục\n\n### 6.1. Danh Sách Tài Liệu Tham Khảo\n1. Tài liệu thiết kế hệ thống ERP\n2. Quy định về quản lý thanh toán\n3. Hướng dẫn sử dụng Django Ledger\n\n### 6.2. Danh Mục Thuật Ngữ\n- ERP: Enterprise Resource Planning\n- API: Application Programming Interface\n- UUID: Universally Unique Identifier\n\n### 6.3. Lịch Sử Thay Đổi Tài Liệu\n\n| Phiên bản | Ngày | Người thực hiện | Mô tả thay đổi |\n|-----------|------|-----------------|---------------|\n| 1.0 | 13/05/2025 | ChatGPT | Tạo mới tài liệu |\n"])</script><script>self.__next_f.push([1,"9:[\"slug\",\"erp/FIN_005_Quan_Ly_Dot_Thanh_Toan\",\"c\"]\nf:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"X5KF-BjlTdL2YCafX7ACW\",\"assetPrefix\":\"/erp-docs\",\"initialCanonicalUrl\":\"/erp/FIN_005_Quan_Ly_Dot_Thanh_Toan/\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"erp/FIN_005_Quan_Ly_Dot_Thanh_Toan\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"erp\\\",\\\"FIN_005_Quan_Ly_Dot_Thanh_Toan\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"erp/FIN_005_Quan_Ly_Dot_Thanh_Toan\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"$L5\",null,{\"children\":[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-2\",\"children\":\"$undefined\"}],\"$undefined\",\"$undefined\"]}],[\"$\",\"$L6\",null,{\"content\":\"$7\"}]]}]}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__className_985585\",\"children\":[\"$\",\"$Lb\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Ld\"],\"globalErrorComponent\":\"$e\",\"missingSlots\":\"$Wf\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"undefined | ERP Documentation\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"documentation,ERP,technical,mermaid,markdown\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>