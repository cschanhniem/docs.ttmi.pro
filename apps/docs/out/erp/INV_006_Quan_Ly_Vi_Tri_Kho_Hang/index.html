<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/erp-docs/_next/static/css/4b73dfd0f7bdc629.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js"/><script src="/erp-docs/_next/static/chunks/7384d974-8b753aa07a0575a2.js" async=""></script><script src="/erp-docs/_next/static/chunks/381-1b6d0728bba7b8e7.js" async=""></script><script src="/erp-docs/_next/static/chunks/main-app-5d87a2fd0f4f2f33.js" async=""></script><script src="/erp-docs/_next/static/chunks/d550ec10-485e3f71f5def856.js" async=""></script><script src="/erp-docs/_next/static/chunks/993-1b6a71072be86da4.js" async=""></script><script src="/erp-docs/_next/static/chunks/410-1ece2fcedd156d2f.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/layout-b6ef60bec0ff2cf2.js" async=""></script><title>undefined | ERP Documentation</title><meta name="keywords" content="documentation,ERP,technical,mermaid,markdown"/><meta name="next-size-adjust"/><script src="/erp-docs/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_985585"><div class="min-h-screen flex items-center justify-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><script src="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[5214,[],\"\"]\n5:I[3040,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"DocLayout\"]\n6:I[1276,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"MDXContent\"]\n8:I[6472,[],\"\"]\na:I[9190,[],\"\"]\nb:I[4550,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"ThemeProvider\"]\nc:I[8910,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"AuthProvider\"]\ne:I[3013,[],\"\"]\n7:T5af8,"])</script><script>self.__next_f.push([1,"# INV_006_Quản Lý Vị Trí Kho Hàng\n\n*Phiên bản: 1.0*  \n*Người tạo: [Tên Tác Giả]*  \n*Ngày tạo: [DD/MM/YYYY]*  \n*Cập nhật lần cuối: [DD/MM/YYYY]*  \n*Người cập nhật: [Tên Người Cập Nhật]*\n\n## 1. Tổng Quan Nghiệp Vụ\n\n### 1.1. Mô Tả Nghiệp Vụ\nQuản lý vị trí kho hàng là nghiệp vụ cho phép thiết lập, kiểm soát, phân loại và truy vết các vị trí lưu trữ vật tư, hàng hóa trong từng kho. Hệ thống hỗ trợ quản lý chi tiết từng vị trí (kệ, tầng, dãy, ô, ...), giúp tối ưu hóa không gian, kiểm soát tồn kho chính xác, giảm thất thoát và nâng cao hiệu quả vận hành kho.\n\n### 1.2. Phạm Vi Áp Dụng\nÁp dụng cho các bộ phận: Kho, Kế toán, Quản trị hệ thống, Sản xuất, ...\n\n### 1.3. Định Nghĩa Thuật Ngữ\n| Thuật ngữ | Định nghĩa |\n|-----------|------------|\n| Vị trí kho hàng | Đơn vị lưu trữ nhỏ nhất trong kho (kệ, ô, tầng, dãy, ...)|\n| Mã vị trí | Định danh duy nhất cho từng vị trí trong kho |\n| Tên vị trí | Tên mô tả vị trí trong kho |\n| Mã kho | Định danh kho chứa vị trí |\n| Trạng thái | Hoạt động/Không hoạt động |\n\n### 1.4. Tài Liệu Liên Quan\n| STT | Mã tài liệu | Tên tài liệu | Mô tả |\n|-----|-------------|--------------|-------|\n| 1   | INV_001     | Quản Lý Kho Hàng | Thiết lập, quản lý thông tin kho |\n| 2   | INV_005     | Quản Lý Nhập Xuất Kho | Quản lý nhập xuất liên quan vị trí |\n\n## 2. Quy Trình Nghiệp Vụ\n\n### 2.1. Tổng Quan Quy Trình\nQuy trình quản lý vị trí kho hàng gồm: tạo mới, cập nhật, phân loại, kích hoạt/vô hiệu hóa, truy vấn, xóa vị trí.\n\n### 2.2. Sơ Đồ Quy Trình (Business Flow)\n\n```mermaid\nflowchart TD\n    A[Tạo vị trí kho hàng] --\u003e B[Kiểm tra thông tin vị trí]\n    B --\u003e C[Lưu vị trí vào hệ thống]\n    C --\u003e D[Phân loại vị trí theo kho]\n    D --\u003e E[Kích hoạt/Vô hiệu hóa vị trí]\n    E --\u003e F[Truy vấn, báo cáo vị trí]\n    F --\u003e G[Xóa vị trí (nếu cần)]\n```\n\n### 2.3. Chi Tiết Các Bước Quy Trình\n\n#### 2.3.1. Tạo vị trí kho hàng\n- **Mô tả**: Tạo mới vị trí lưu trữ trong kho\n- **Đầu vào**: Mã kho, mã vị trí, tên vị trí, trạng thái, ghi chú\n- **Đầu ra**: Vị trí kho hàng mới\n- **Người thực hiện**: Quản lý kho, quản trị hệ thống\n- **Điều kiện tiên quyết**: Có quyền tạo vị trí\n- **Xử lý ngoại lệ**: Thiếu thông tin bắt buộc, mã vị trí trùng\n\n#### 2.3.2. Cập nhật thông tin vị trí\n- **Mô tả**: Sửa đổi thông tin vị trí kho hàng\n- **Đầu vào**: Thông tin vị trí cần cập nhật\n- **Đầu ra**: Vị trí đã cập nhật\n- **Người thực hiện**: Quản lý kho, quản trị hệ thống\n- **Điều kiện tiên quyết**: Có quyền cập nhật\n- **Xử lý ngoại lệ**: Vị trí không tồn tại\n\n#### 2.3.3. Phân loại vị trí theo kho\n- **Mô tả**: Gán vị trí cho kho cụ thể\n- **Đầu vào**: Mã kho, mã vị trí\n- **Đầu ra**: Vị trí thuộc kho\n- **Người thực hiện**: Quản lý kho\n- **Điều kiện tiên quyết**: Kho tồn tại\n- **Xử lý ngoại lệ**: Kho không tồn tại\n\n#### 2.3.4. Kích hoạt/Vô hiệu hóa vị trí\n- **Mô tả**: Đổi trạng thái vị trí (hoạt động/không hoạt động)\n- **Đầu vào**: Mã vị trí, trạng thái mới\n- **Đầu ra**: Vị trí đã cập nhật trạng thái\n- **Người thực hiện**: Quản lý kho\n- **Điều kiện tiên quyết**: Có quyền cập nhật\n- **Xử lý ngoại lệ**: Vị trí không tồn tại\n\n#### 2.3.5. Truy vấn, báo cáo vị trí\n- **Mô tả**: Tra cứu, thống kê vị trí kho hàng\n- **Đầu vào**: Tiêu chí truy vấn (kho, trạng thái, ...)\n- **Đầu ra**: Danh sách vị trí phù hợp\n- **Người thực hiện**: Quản lý kho, kế toán\n- **Điều kiện tiên quyết**: Có quyền truy vấn\n- **Xử lý ngoại lệ**: Không có dữ liệu phù hợp\n\n#### 2.3.6. Xóa vị trí kho hàng\n- **Mô tả**: Xóa vị trí không còn sử dụng\n- **Đầu vào**: Mã vị trí\n- **Đầu ra**: Vị trí đã xóa\n- **Người thực hiện**: Quản trị hệ thống\n- **Điều kiện tiên quyết**: Vị trí không liên kết dữ liệu khác\n- **Xử lý ngoại lệ**: Vị trí đang được sử dụng\n\n### 2.4. Sơ Đồ Tuần Tự (Sequence Diagram)\n\n```mermaid\nsequenceDiagram\n    participant U as Quản lý kho\n    participant S as Hệ thống\n    participant DB as Cơ sở dữ liệu\n\n    U-\u003e\u003eS: Tạo vị trí kho hàng\n    S-\u003e\u003eDB: Lưu vị trí mới\n    DB--\u003e\u003eS: Xác nhận lưu\n    S--\u003e\u003eU: Thông báo thành công\n\n    U-\u003e\u003eS: Cập nhật vị trí\n    S-\u003e\u003eDB: Cập nhật thông tin\n    DB--\u003e\u003eS: Xác nhận cập nhật\n    S--\u003e\u003eU: Thông báo thành công\n\n    U-\u003e\u003eS: Truy vấn vị trí\n    S-\u003e\u003eDB: Truy vấn dữ liệu\n    DB--\u003e\u003eS: Trả về danh sách\n    S--\u003e\u003eU: Hiển thị kết quả\n\n    alt Trường hợp lỗi\n        S--\u003e\u003eU: Thông báo lỗi\n    end\n```\n\n### 2.5. Luồng Nghiệp Vụ Thay Thế\n    A[Bắt đầu] --\u003e B[Thiết kế cấu trúc vị trí kho]\n    B --\u003e C[Tạo danh sách vị trí]\n    C --\u003e D[Gán thông tin cho vị trí]\n    D --\u003e E[Kiểm tra và kích hoạt vị trí]\n    E --\u003e F[Sử dụng vị trí trong nhập/xuất kho]\n    F --\u003e G[Theo dõi hàng hóa theo vị trí]\n    G --\u003e H[Phân tích hiệu quả sử dụng vị trí]\n    H --\u003e I{Cần điều chỉnh?}\n    I --\u003e|Có| J[Tối ưu hóa vị trí]\n    J --\u003e F\n    I --\u003e|Không| K[Tiếp tục sử dụng]\n    K --\u003e L[Đánh giá định kỳ]\n    L --\u003e I\n```\n\n### 2.3. Chi Tiết Các Bước Quy Trình\n\n#### 2.3.1. Thiết kế cấu trúc vị trí kho\n- **Mô tả**: Xác định cấu trúc vị trí trong kho dựa trên đặc điểm kho và hàng hóa\n- **Đầu vào**: Thông tin kho, loại hàng hóa lưu trữ, quy định về bảo quản\n- **Đầu ra**: Cấu trúc vị trí kho (khu vực, dãy, tầng, ô...)\n- **Người thực hiện**: Quản lý kho, chuyên gia tư vấn logistics\n- **Điều kiện tiên quyết**: Đã có kho hàng và kế hoạch lưu trữ\n- **Xử lý ngoại lệ**: Điều chỉnh cấu trúc nếu không phù hợp với đặc điểm kho thực tế\n\n#### 2.3.2. Tạo danh sách vị trí và gán thông tin\n- **Mô tả**: Tạo danh sách các vị trí trong kho và gán các thông tin liên quan\n- **Đầu vào**: Cấu trúc vị trí kho, thông tin chi tiết (kích thước, tải trọng...)\n- **Đầu ra**: Danh sách vị trí kho với thông tin đầy đủ\n- **Người thực hiện**: Nhân viên quản lý kho, nhân viên IT\n- **Điều kiện tiên quyết**: Đã có cấu trúc vị trí kho\n- **Xử lý ngoại lệ**: Kiểm tra trùng lặp mã vị trí, xử lý vị trí đặc biệt\n\n#### 2.3.3. Kiểm tra và kích hoạt vị trí\n- **Mô tả**: Kiểm tra các vị trí đã tạo và kích hoạt để sử dụng\n- **Đầu vào**: Danh sách vị trí kho\n- **Đầu ra**: Vị trí kho đã được kích hoạt\n- **Người thực hiện**: Quản lý kho\n- **Điều kiện tiên quyết**: Đã có danh sách vị trí kho\n- **Xử lý ngoại lệ**: Vô hiệu hóa các vị trí không phù hợp\n\n#### 2.3.4. Sử dụng vị trí trong nhập/xuất kho\n- **Mô tả**: Sử dụng thông tin vị trí trong các hoạt động nhập/xuất kho\n- **Đầu vào**: Thông tin nhập/xuất kho, danh sách vị trí\n- **Đầu ra**: Hàng hóa được lưu trữ/lấy đúng vị trí\n- **Người thực hiện**: Nhân viên kho\n- **Điều kiện tiên quyết**: Vị trí kho đã được kích hoạt\n- **Xử lý ngoại lệ**: Xử lý trường hợp vị trí đã đầy hoặc không còn phù hợp\n\n#### 2.3.5. Theo dõi và tối ưu hóa\n- **Mô tả**: Theo dõi hiệu quả sử dụng vị trí và tối ưu hóa nếu cần\n- **Đầu vào**: Dữ liệu sử dụng vị trí, thống kê tần suất xuất/nhập\n- **Đầu ra**: Kế hoạch tối ưu hóa vị trí kho\n- **Người thực hiện**: Quản lý kho\n- **Điều kiện tiên quyết**: Vị trí kho đã được sử dụng một thời gian\n- **Xử lý ngoại lệ**: Xử lý các trường hợp vị trí không hiệu quả\n\n### 2.4. Sơ Đồ Tuần Tự (Sequence Diagram)\n\n```mermaid\nsequenceDiagram\n    participant Admin as Quản trị viên\n    participant System as Hệ thống\n    participant WH as Quản lý kho\n    participant Staff as Nhân viên kho\n    \n    Admin-\u003e\u003eSystem: Thiết lập cấu trúc vị trí\n    System--\u003e\u003eAdmin: Hiển thị form thiết lập\n    Admin-\u003e\u003eSystem: Nhập thông tin cấu trúc\n    System--\u003e\u003eAdmin: Xác nhận cấu trúc\n    \n    Admin-\u003e\u003eSystem: Tạo danh sách vị trí\n    System--\u003e\u003eAdmin: Hiển thị form tạo vị trí\n    Admin-\u003e\u003eSystem: Nhập thông tin vị trí\n    System-\u003e\u003eSystem: Kiểm tra trùng lặp\n    System--\u003e\u003eAdmin: Xác nhận tạo vị trí\n    \n    WH-\u003e\u003eSystem: Kiểm tra vị trí\n    System--\u003e\u003eWH: Hiển thị danh sách vị trí\n    WH-\u003e\u003eSystem: Kích hoạt vị trí\n    System--\u003e\u003eWH: Xác nhận kích hoạt\n    \n    Staff-\u003e\u003eSystem: Nhập kho với vị trí\n    System-\u003e\u003eSystem: Kiểm tra vị trí hợp lệ\n    System--\u003e\u003eStaff: Xác nhận nhập kho\n    \n    Staff-\u003e\u003eSystem: Xuất kho từ vị trí\n    System-\u003e\u003eSystem: Kiểm tra vị trí và tồn kho\n    System--\u003e\u003eStaff: Xác nhận xuất kho\n    \n    WH-\u003e\u003eSystem: Yêu cầu báo cáo sử dụng vị trí\n    System--\u003e\u003eWH: Hiển thị báo cáo\n    WH-\u003e\u003eSystem: Thiết lập tối ưu hóa vị trí\n    System--\u003e\u003eWH: Xác nhận cập nhật\n```\n\n### 2.5. Luồng Nghiệp Vụ Thay Thế\n- **Vị trí tạm thời**: Trong trường hợp khẩn cấp hoặc quá tải, có thể thiết lập các vị trí tạm thời\n- **Chuyển vị trí hàng hóa**: Quy trình di chuyển hàng hóa từ vị trí này sang vị trí khác\n- **Gộp/tách vị trí**: Gộp nhiều vị trí nhỏ thành vị trí lớn hoặc tách vị trí lớn thành nhiều vị trí nhỏ\n- **Vô hiệu hóa vị trí**: Đánh dấu vị trí không sử dụng do sửa chữa, bảo trì hoặc không còn phù hợp\n\n## 3. Yêu Cầu Chức Năng\n\n### 3.1. Danh Sách Chức Năng\n\n| STT | Mã chức năng | Tên chức năng | Mô tả | Độ ưu tiên |\n|-----|--------------|---------------|-------|------------|\n| 1   | LOC_LIST | Xem danh sách vị trí | Hiển thị danh sách vị trí kho với các bộ lọc và tìm kiếm | Cao |\n| 2   | LOC_CREATE | Tạo vị trí mới | Thêm vị trí mới vào hệ thống | Cao |\n| 3   | LOC_UPDATE | Cập nhật vị trí | Chỉnh sửa thông tin vị trí | Cao |\n| 4   | LOC_VIEW | Xem chi tiết vị trí | Xem toàn bộ thông tin chi tiết của vị trí | Cao |\n| 5   | LOC_STATUS | Thay đổi trạng thái | Đánh dấu vị trí là active/inactive | Cao |\n| 6   | LOC_ASSIGN | Gán hàng hóa vào vị trí | Gán hàng hóa vào vị trí kho | Cao |\n| 7   | LOC_MOVE | Di chuyển hàng giữa vị trí | Di chuyển hàng hóa từ vị trí này sang vị trí khác | Trung bình |\n| 8   | LOC_REPORT | Báo cáo sử dụng vị trí | Tạo báo cáo về tình hình sử dụng vị trí kho | Trung bình |\n\n### 3.2. Chi Tiết Chức Năng\n\n#### 3.2.1. LOC_CREATE: Tạo vị trí mới\n- **Mô tả**: Cho phép người dùng tạo vị trí kho mới trong hệ thống\n- **Đầu vào**: Thông tin vị trí (mã vị trí, khu vực, dãy, tầng, ô, kích thước, tải trọng, trạng thái...)\n- **Đầu ra**: Bản ghi vị trí kho mới trong hệ thống\n- **Điều kiện tiên quyết**: Người dùng đã đăng nhập và có quyền tạo vị trí\n- **Luồng xử lý chính**:\n  1. Người dùng chọn \"Tạo vị trí mới\"\n  2. Hệ thống hiển thị form nhập thông tin\n  3. Người dùng nhập thông tin vị trí\n  4. Người dùng nhấn \"Lưu\"\n  5. Hệ thống kiểm tra tính hợp lệ của dữ liệu\n  6. Hệ thống kiểm tra trùng lặp mã vị trí\n  7. Hệ thống lưu vị trí mới\n- **Luồng xử lý thay thế/ngoại lệ**:\n  1. Nếu dữ liệu không hợp lệ, hiển thị thông báo lỗi\n  2. Nếu mã vị trí đã tồn tại, yêu cầu nhập mã khác\n- **Giao diện liên quan**: Form tạo vị trí mới\n\n#### 3.2.2. LOC_ASSIGN: Gán hàng hóa vào vị trí\n- **Mô tả**: Cho phép gán hàng hóa vào vị trí kho\n- **Đầu vào**: ID vị trí, ID hàng hóa, số lượng\n- **Đầu ra**: Liên kết giữa hàng hóa và vị trí\n- **Điều kiện tiên quyết**: Vị trí và hàng hóa đã tồn tại trong hệ thống\n- **Luồng xử lý chính**:\n  1. Người dùng chọn vị trí cần gán hàng\n  2. Người dùng chọn hàng hóa\n  3. Người dùng nhập số lượng\n  4. Người dùng nhấn \"Lưu\"\n  5. Hệ thống kiểm tra tính hợp lệ của dữ liệu\n  6. Hệ thống kiểm tra sức chứa của vị trí\n  7. Hệ thống lưu thông tin gán hàng\n- **Luồng xử lý thay thế/ngoại lệ**:\n  1. Nếu vị trí đã đầy, hiển thị thông báo lỗi\n  2. Nếu hàng hóa không phù hợp với vị trí, hiển thị cảnh báo\n- **Giao diện liên quan**: Form gán hàng hóa vào vị trí\n\n## 4. Thiết Kế Kỹ Thuật\n\n### 4.1. Kiến Trúc Hệ Thống\n\n```mermaid\nflowchart TD\n    A[Client] --\u003e B[API Gateway]\n    B --\u003e C[ViTriKhoService]\n    C --\u003e D[ViTriKhoRepository]\n    C --\u003e E[KhoHangService]\n    E --\u003e F[KhoHangRepository]\n    C --\u003e G[VatTuService]\n    G --\u003e H[VatTuRepository]\n    D --\u003e I[(Database)]\n    F --\u003e I\n    H --\u003e I\n```\n\n### 4.2. API Endpoints\n\n#### 4.2.1. Lấy danh sách vị trí kho\n- **Mô tả**: Trả về danh sách vị trí kho theo điều kiện lọc\n- **URL**: `GET /api/v1/entity/{entity_slug}/vi-tri-kho/`\n- **Query Parameters**:\n  - `kho`: ID kho hàng\n  - `khu_vuc`: Khu vực\n  - `status`: Trạng thái (active/inactive)\n  - `available`: Chỉ lấy các vị trí còn trống\n  - `search`: Từ khóa tìm kiếm\n  - `page`: Số trang\n  - `page_size`: Số bản ghi trên mỗi trang\n  - `ordering`: Trường sắp xếp\n- **Response**: Danh sách vị trí kho, phân trang\n\n#### 4.2.2. Lấy chi tiết vị trí kho\n- **Mô tả**: Trả về thông tin chi tiết của một vị trí kho\n- **URL**: `GET /api/v1/entity/{entity_slug}/vi-tri-kho/{uuid}/`\n- **Response**: Chi tiết vị trí kho và danh sách hàng hóa được lưu trữ\n\n#### 4.2.3. Tạo vị trí kho mới\n- **Mô tả**: Tạo vị trí kho mới trong hệ thống\n- **URL**: `POST /api/v1/entity/{entity_slug}/vi-tri-kho/`\n- **Request Body**: Thông tin vị trí kho\n- **Response**: Thông tin vị trí kho đã tạo\n\n#### 4.2.4. Cập nhật vị trí kho\n- **Mô tả**: Cập nhật thông tin vị trí kho\n- **URL**: `PUT /api/v1/entity/{entity_slug}/vi-tri-kho/{uuid}/`\n- **Request Body**: Thông tin cập nhật\n- **Response**: Thông tin vị trí kho đã cập nhật\n\n#### 4.2.5. Gán hàng hóa vào vị trí\n- **Mô tả**: Gán hàng hóa vào vị trí kho\n- **URL**: `POST /api/v1/entity/{entity_slug}/vi-tri-kho/{uuid}/assign/`\n- **Request Body**: Thông tin hàng hóa và số lượng\n- **Response**: Thông tin gán hàng đã tạo\n\n#### 4.2.6. Di chuyển hàng giữa vị trí\n- **Mô tả**: Di chuyển hàng hóa từ vị trí này sang vị trí khác\n- **URL**: `POST /api/v1/entity/{entity_slug}/vi-tri-kho/move/`\n- **Request Body**: Thông tin vị trí nguồn, vị trí đích, hàng hóa và số lượng\n- **Response**: Kết quả di chuyển\n\n### 4.3. Service Logic\n\n#### 4.3.1. ViTriKhoService\n- **Mô tả**: Xử lý logic nghiệp vụ liên quan đến quản lý vị trí kho\n- **Chức năng chính**:\n  1. Tạo và quản lý vị trí kho\n  2. Cập nhật thông tin vị trí kho\n  3. Quản lý trạng thái vị trí kho\n  4. Gán hàng hóa vào vị trí\n  5. Di chuyển hàng hóa giữa các vị trí\n  6. Báo cáo sử dụng vị trí\n- **Các dependencies**:\n  1. ViTriKhoRepository\n  2. KhoHangService\n  3. VatTuService\n- **Sơ đồ luồng xử lý**:\n\n```mermaid\nflowchart TD\n    A[Nhận request] --\u003e B[Validate dữ liệu]\n    B --\u003e C{Dữ liệu hợp lệ?}\n    C --\u003e|Có| D[Xử lý business logic]\n    C --\u003e|Không| E[Trả về lỗi]\n    D --\u003e F{Loại thao tác?}\n    F --\u003e|Tạo| G[Tạo vị trí mới]\n    F --\u003e|Cập nhật| H[Cập nhật vị trí]\n    F --\u003e|Gán hàng| I[Xử lý gán hàng]\n    F --\u003e|Di chuyển| J[Xử lý di chuyển]\n    G --\u003e K[Kiểm tra trùng lặp]\n    K --\u003e L{Trùng lặp?}\n    L --\u003e|Có| M[Thông báo lỗi]\n    L --\u003e|Không| N[Lưu vị trí mới]\n    H --\u003e O[Kiểm tra hợp lệ]\n    O --\u003e P{Hợp lệ?}\n    P --\u003e|Có| Q[Lưu thay đổi]\n    P --\u003e|Không| R[Thông báo lỗi]\n    I --\u003e S[Kiểm tra sức chứa]\n    S --\u003e T{Đủ chỗ?}\n    T --\u003e|Có| U[Lưu thông tin gán hàng]\n    T --\u003e|Không| V[Thông báo lỗi]\n    J --\u003e W[Kiểm tra vị trí nguồn và đích]\n    W --\u003e X{Hợp lệ?}\n    X --\u003e|Có| Y[Xử lý di chuyển]\n    X --\u003e|Không| Z[Thông báo lỗi]\n    N --\u003e AA[Ghi log]\n    Q --\u003e AA\n    U --\u003e AA\n    Y --\u003e AA\n    M --\u003e AA\n    R --\u003e AA\n    V --\u003e AA\n    Z --\u003e AA\n    AA --\u003e AB[Trả về kết quả]\n    E --\u003e AA\n```\n\n### 4.4. Mô Hình Dữ Liệu\n\n#### 4.4.1. Entity Relationship Diagram (ERD)\n\n```mermaid\nerDiagram\n    EntityModel ||--o{ ViTriKhoHangModel : \"có\"\n    KhoHangModel ||--o{ ViTriKhoHangModel : \"chứa\"\n    ViTriKhoHangModel ||--o{ HangHoaViTriModel : \"chứa\"\n    VatTuModel ||--o{ HangHoaViTriModel : \"được lưu ở\"\n    \n    ViTriKhoHangModel {\n        UUID uuid PK\n        FK EntityModel entity_model\n        FK KhoHangModel kho_hang\n        String ma_vi_tri\n        String ten_vi_tri\n        String khu_vuc\n        String day\n        String tang\n        String o\n        Decimal chieu_dai\n        Decimal chieu_rong\n        Decimal chieu_cao\n        Decimal tai_trong_toi_da\n        Decimal the_tich_toi_da\n        String ghi_chu\n        Integer trang_thai\n        DateTime created\n        DateTime updated\n    }\n    \n    HangHoaViTriModel {\n        UUID uuid PK\n        FK ViTriKhoHangModel vi_tri_kho\n        FK VatTuModel vat_tu\n        Decimal so_luong\n        String lo_hang\n        DateTime ngay_nhap\n        String ghi_chu\n    }\n```\n\n#### 4.4.2. Chi Tiết Bảng Dữ Liệu\n\n##### Bảng: ViTriKhoHangModel\n- **Mô tả**: Lưu trữ thông tin về vị trí trong kho hàng\n- **Các trường chính**:\n  - `uuid`: Khóa chính, định danh duy nhất\n  - `entity_model`: Khóa ngoại tham chiếu đến EntityModel\n  - `kho_hang`: Khóa ngoại tham chiếu đến KhoHangModel\n  - `ma_vi_tri`: Mã vị trí kho\n  - `ten_vi_tri`: Tên vị trí kho\n  - `khu_vuc`: Khu vực trong kho\n  - `day`: Dãy kệ trong kho\n  - `tang`: Tầng kệ trong kho\n  - `o`: Ô chứa hàng trong kệ\n  - `chieu_dai`: Chiều dài của vị trí (đơn vị: m)\n  - `chieu_rong`: Chiều rộng của vị trí (đơn vị: m)\n  - `chieu_cao`: Chiều cao của vị trí (đơn vị: m)\n  - `tai_trong_toi_da`: Tải trọng tối đa của vị trí (đơn vị: kg)\n  - `the_tich_toi_da`: Thể tích tối đa của vị trí (đơn vị: m³)\n  - `ghi_chu`: Ghi chú về vị trí\n  - `trang_thai`: Trạng thái vị trí (1: active, 0: inactive)\n  - `created`: Thời gian tạo\n  - `updated`: Thời gian cập nhật\n\n##### Bảng: HangHoaViTriModel\n- **Mô tả**: Lưu trữ thông tin về hàng hóa được lưu trữ tại vị trí\n- **Các trường chính**:\n  - `uuid`: Khóa chính, định danh duy nhất\n  - `vi_tri_kho`: Khóa ngoại tham chiếu đến ViTriKhoHangModel\n  - `vat_tu`: Khóa ngoại tham chiếu đến VatTuModel\n  - `so_luong`: Số lượng hàng hóa tại vị trí\n  - `lo_hang`: Mã lô hàng (nếu có)\n  - `ngay_nhap`: Ngày nhập hàng vào vị trí\n  - `ghi_chu`: Ghi chú về hàng hóa tại vị trí\n\n## 5. Kế Hoạch Kiểm Thử\n\n### 5.1. Phạm Vi Kiểm Thử\nKiểm thử sẽ bao gồm tất cả các chức năng liên quan đến quản lý vị trí kho hàng, bao gồm:\n- Tạo mới vị trí kho\n- Cập nhật thông tin vị trí kho\n- Tìm kiếm và lọc vị trí kho\n- Thay đổi trạng thái vị trí kho\n- Gán hàng hóa vào vị trí\n- Di chuyển hàng hóa giữa các vị trí\n- Báo cáo sử dụng vị trí kho\n\n### 5.2. Kịch Bản Kiểm Thử\n\n| STT | Mã kịch bản | Tên kịch bản | Mô tả | Điều kiện tiên quyết | Các bước | Kết quả mong đợi |\n|-----|------------|--------------|-------|---------------------|----------|-----------------|\n| 1   | TC_LOC_C01 | Tạo vị trí kho mới thành công | Kiểm tra việc tạo vị trí kho mới | Người dùng đã đăng nhập và có quyền | 1. Truy cập form tạo vị trí\u003cbr\u003e2. Nhập thông tin hợp lệ\u003cbr\u003e3. Nhấn Lưu | Vị trí kho mới được tạo thành công |\n| 2   | TC_LOC_C02 | Tạo vị trí với mã trùng | Kiểm tra validate mã vị trí trùng | Đã có vị trí trong hệ thống | 1. Truy cập form tạo vị trí\u003cbr\u003e2. Nhập mã vị trí đã tồn tại\u003cbr\u003e3. Nhấn Lưu | Hiển thị thông báo lỗi về mã vị trí trùng |\n| 3   | TC_LOC_U01 | Cập nhật thông tin vị trí | Kiểm tra cập nhật thông tin | Vị trí đã tồn tại | 1. Mở form cập nhật\u003cbr\u003e2. Thay đổi thông tin\u003cbr\u003e3. Nhấn Lưu | Thông tin được cập nhật thành công |\n| 4   | TC_LOC_A01 | Gán hàng hóa vào vị trí | Kiểm tra chức năng gán hàng | Vị trí và hàng hóa đã tồn tại | 1. Chọn vị trí\u003cbr\u003e2. Chọn hàng hóa\u003cbr\u003e3. Nhập số lượng\u003cbr\u003e4. Nhấn Lưu | Hàng hóa được gán vào vị trí thành công |\n| 5   | TC_LOC_M01 | Di chuyển hàng giữa vị trí | Kiểm tra chức năng di chuyển | Hàng đang ở vị trí nguồn | 1. Chọn vị trí nguồn\u003cbr\u003e2. Chọn vị trí đích\u003cbr\u003e3. Chọn hàng và số lượng\u003cbr\u003e4. Nhấn Di chuyển | Hàng được di chuyển thành công |\n\n## 6. Phụ Lục\n\n### 6.1. Danh Sách Tài Liệu Tham Khảo\n1. Tài liệu thiết kế cơ sở dữ liệu ERP\n2. Tài liệu API đặc tả\n3. Quy định về quản lý kho của doanh nghiệp\n\n### 6.2. Danh Mục Thuật Ngữ\n- **ViTriKhoHangModel**: Mô hình dữ liệu lưu trữ thông tin vị trí kho\n- **HangHoaViTriModel**: Mô hình dữ liệu lưu trữ thông tin hàng hóa tại vị trí\n- **Khu vực**: Phân chia không gian lớn trong kho\n- **Dãy/Tầng/Ô**: Cấu trúc phân chia chi tiết vị trí trong kho\n\n### 6.3. Lịch Sử Thay Đổi Tài Liệu\n\n| Phiên bản | Ngày | Người thực hiện | Mô tả thay đổi |\n|-----------|------|-----------------|---------------|\n| 1.0 | 25/07/2023 | Auto Generated | Tạo tài liệu ban đầu |"])</script><script>self.__next_f.push([1,"9:[\"slug\",\"erp/INV_006_Quan_Ly_Vi_Tri_Kho_Hang\",\"c\"]\nf:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"X5KF-BjlTdL2YCafX7ACW\",\"assetPrefix\":\"/erp-docs\",\"initialCanonicalUrl\":\"/erp/INV_006_Quan_Ly_Vi_Tri_Kho_Hang/\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"erp/INV_006_Quan_Ly_Vi_Tri_Kho_Hang\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"erp\\\",\\\"INV_006_Quan_Ly_Vi_Tri_Kho_Hang\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"erp/INV_006_Quan_Ly_Vi_Tri_Kho_Hang\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"$L5\",null,{\"children\":[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-2\",\"children\":\"$undefined\"}],\"$undefined\",\"$undefined\"]}],[\"$\",\"$L6\",null,{\"content\":\"$7\"}]]}]}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__className_985585\",\"children\":[\"$\",\"$Lb\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Ld\"],\"globalErrorComponent\":\"$e\",\"missingSlots\":\"$Wf\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"undefined | ERP Documentation\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"documentation,ERP,technical,mermaid,markdown\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>