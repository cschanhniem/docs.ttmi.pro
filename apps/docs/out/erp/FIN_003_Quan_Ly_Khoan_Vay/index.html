<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/erp-docs/_next/static/css/4b73dfd0f7bdc629.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js"/><script src="/erp-docs/_next/static/chunks/7384d974-8b753aa07a0575a2.js" async=""></script><script src="/erp-docs/_next/static/chunks/381-1b6d0728bba7b8e7.js" async=""></script><script src="/erp-docs/_next/static/chunks/main-app-5d87a2fd0f4f2f33.js" async=""></script><script src="/erp-docs/_next/static/chunks/d550ec10-485e3f71f5def856.js" async=""></script><script src="/erp-docs/_next/static/chunks/993-1b6a71072be86da4.js" async=""></script><script src="/erp-docs/_next/static/chunks/410-1ece2fcedd156d2f.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/layout-b6ef60bec0ff2cf2.js" async=""></script><title>undefined | ERP Documentation</title><meta name="keywords" content="documentation,ERP,technical,mermaid,markdown"/><meta name="next-size-adjust"/><script src="/erp-docs/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_985585"><div class="min-h-screen flex items-center justify-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><script src="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[5214,[],\"\"]\n5:I[3040,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"DocLayout\"]\n6:I[1276,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"MDXContent\"]\n8:I[6472,[],\"\"]\na:I[9190,[],\"\"]\nb:I[4550,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"ThemeProvider\"]\nc:I[8910,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"AuthProvider\"]\ne:I[3013,[],\"\"]\n7:T25ba,"])</script><script>self.__next_f.push([1,"# FIN_003_Quản Lý Khoản Vay\n\n*Phiên bản: 1.0*  \n*Người tạo: ChatGPT*  \n*Ngày tạo: 13/05/2025*  \n*Cập nhật lần cuối: 13/05/2025*  \n*Người cập nhật: ChatGPT*\n\n## 1. Tổng Quan Nghiệp Vụ\n\n### 1.1. Mô Tả Nghiệp Vụ\nQuy trình Quản Lý Khoản Vay là một phần thiết yếu trong phân hệ Tài Chính của hệ thống ERP, cho phép doanh nghiệp quản lý các khoản vay, khế ước và hợp đồng tín dụng. Quy trình này bao gồm việc theo dõi các thông tin về khoản vay, lãi suất, lịch trả nợ và thanh toán, giúp doanh nghiệp quản lý hiệu quả các nghĩa vụ tài chính.\n\n### 1.2. Phạm Vi Áp Dụng\n- **Phòng Tài Chính**: Quản lý và theo dõi khoản vay\n- **Phòng Kế Toán**: Ghi nhận và hạch toán các khoản vay\n- **Ban Lãnh Đạo**: Phê duyệt và giám sát khoản vay\n- **Bộ phận Pháp Chế**: Quản lý hợp đồng và khế ước\n\n### 1.3. Định Nghĩa Thuật Ngữ\n| Thuật ngữ | Định nghĩa |\n|-----------|------------|\n| Khế ước | Văn bản thỏa thuận vay nợ giữa các bên |\n| Lãi suất | Tỷ lệ phần trăm tính trên số tiền vay |\n| Kỳ hạn | Thời gian từ khi nhận nợ đến khi đáo hạn |\n| Đáo hạn | Thời điểm phải hoàn trả khoản vay |\n\n### 1.4. Tài Liệu Liên Quan\n| STT | Mã tài liệu | Tên tài liệu | Mô tả |\n|-----|-------------|--------------|-------|\n| 1   | FIN_002 | Quản Lý Thanh Toán | Quy trình quản lý thanh toán |\n| 2   | FIN_004 | Quản Lý Phí | Quy trình quản lý phí vay |\n| 3   | ACC_002 | Sổ Cái | Quy trình ghi nhận bút toán |\n\n## 2. Quy Trình Nghiệp Vụ\n\n### 2.1. Tổng Quan Quy Trình\nQuy trình Quản Lý Khoản Vay bao gồm các phần chính:\n1. Thiết lập thông tin khoản vay\n2. Quản lý lãi suất\n3. Theo dõi lịch thanh toán\n4. Ghi nhận các khoản thanh toán\n5. Quản lý tình trạng khoản vay\n\n### 2.2. Sơ Đồ Quy Trình (Business Flow)\n\n```mermaid\nflowchart TD\n    A[Bắt đầu] --\u003e B[Tạo khế ước vay]\n    B --\u003e C[Thiết lập thông tin khoản vay]\n    C --\u003e D[Cấu hình lãi suất]\n    D --\u003e E[Tạo lịch thanh toán]\n    E --\u003e F[Theo dõi thanh toán]\n    F --\u003e G{Kiểm tra trạng thái}\n    G --\u003e|Đang thực hiện| F\n    G --\u003e|Hoàn tất| H[Đóng khoản vay]\n    H --\u003e I[Kết thúc]\n```\n\n### 2.3. Chi Tiết Các Bước Quy Trình\n\n#### 2.3.1. Thiết Lập Khoản Vay\n- **Mô tả**: Tạo mới thông tin khoản vay trong hệ thống\n- **Đầu vào**: \n  - Mã khế ước\n  - Thông tin người vay\n  - Số tiền vay\n  - Thời hạn vay\n- **Đầu ra**: Khoản vay được thiết lập trong hệ thống\n- **Người thực hiện**: Cán bộ tín dụng\n- **Điều kiện tiên quyết**: Có hợp đồng vay được phê duyệt\n- **Xử lý ngoại lệ**: Kiểm tra tính hợp lệ của thông tin\n\n#### 2.3.2. Quản Lý Lãi Suất\n- **Mô tả**: Thiết lập và điều chỉnh lãi suất khoản vay\n- **Đầu vào**: \n  - Tỷ lệ lãi suất\n  - Ngày hiệu lực\n  - Phương pháp tính\n- **Đầu ra**: Lãi suất được cập nhật\n- **Người thực hiện**: Cán bộ tài chính\n- **Điều kiện tiên quyết**: Có khoản vay trong hệ thống\n- **Xử lý ngoại lệ**: Kiểm tra tính hợp lý của lãi suất\n\n### 2.4. Sơ Đồ Tuần Tự (Sequence Diagram)\n\n```mermaid\nsequenceDiagram\n    participant U as Người dùng\n    participant L as Quản lý Khoản vay\n    participant I as Quản lý Lãi suất\n    participant P as Quản lý Thanh toán\n    \n    U-\u003e\u003eL: Tạo khoản vay mới\n    L-\u003e\u003eI: Thiết lập lãi suất\n    I--\u003e\u003eL: Xác nhận lãi suất\n    L-\u003e\u003eP: Tạo lịch thanh toán\n    P--\u003e\u003eL: Lịch được tạo\n    L--\u003e\u003eU: Hoàn tất thiết lập\n    \n    U-\u003e\u003eP: Ghi nhận thanh toán\n    P-\u003e\u003eI: Tính toán lãi\n    I--\u003e\u003eP: Kết quả tính toán\n    P--\u003e\u003eU: Xác nhận thanh toán\n```\n\n### 2.5. Luồng Nghiệp Vụ Thay Thế\n1. **Tái cấu trúc khoản vay**:\n   - Đánh giá khả năng trả nợ\n   - Điều chỉnh kỳ hạn\n   - Thay đổi lãi suất\n   - Cập nhật lịch thanh toán\n\n2. **Xử lý nợ quá hạn**:\n   - Ghi nhận tình trạng quá hạn\n   - Tính lãi phạt\n   - Thực hiện các biện pháp thu hồi\n   - Tái cơ cấu nợ nếu cần thiết\n\n## 3. Yêu Cầu Chức Năng\n\n### 3.1. Danh Sách Chức Năng\n\n| STT | Mã chức năng | Tên chức năng | Mô tả | Độ ưu tiên |\n|-----|--------------|---------------|-------|------------|\n| 1   | LOAN_001 | Quản lý khế ước | Quản lý thông tin khế ước vay | Cao |\n| 2   | LOAN_002 | Quản lý lãi suất | Quản lý thông tin lãi suất | Cao |\n| 3   | LOAN_003 | Quản lý thanh toán | Theo dõi lịch và thực hiện thanh toán | Cao |\n| 4   | LOAN_004 | Báo cáo khoản vay | Xuất báo cáo tổng hợp và chi tiết | Trung bình |\n\n### 3.2. Chi Tiết Chức Năng\n\n#### 3.2.1. LOAN_001: Quản lý khế ước\n- **Mô tả**: Quản lý thông tin khế ước vay\n- **Đầu vào**: Thông tin khế ước và khoản vay\n- **Đầu ra**: Khế ước được tạo/cập nhật\n- **Điều kiện tiên quyết**: Quyền quản lý khoản vay\n- **Luồng xử lý chính**:\n  1. Nhập thông tin khế ước\n  2. Kiểm tra tính hợp lệ\n  3. Lưu vào hệ thống\n- **Luồng xử lý thay thế/ngoại lệ**:\n  1. Kiểm tra trùng mã khế ước\n  2. Xử lý lỗi validate\n- **Giao diện liên quan**: Màn hình quản lý khế ước\n\n## 4. Thiết Kế Kỹ Thuật\n\n### 4.1. Kiến Trúc Hệ Thống\n\n```mermaid\nflowchart TD\n    A[Web Interface] --\u003e B[API Gateway]\n    B --\u003e C[Loan Service]\n    B --\u003e D[Interest Rate Service]\n    B --\u003e E[Payment Service]\n    C --\u003e F[(Database)]\n    D --\u003e F\n    E --\u003e F\n```\n\n### 4.2. API Endpoints\n\n#### 4.2.1. Quản Lý Khoản Vay\n- **Mô tả**: API quản lý khoản vay\n- **URL**: \n  - `GET /api/v1/loans/`\n  - `POST /api/v1/loans/`\n  - `PUT /api/v1/loans/{uuid}/`\n  - `DELETE /api/v1/loans/{uuid}/`\n\n#### 4.2.2. Quản Lý Lãi Suất\n- **Mô tả**: API quản lý lãi suất\n- **URL**:\n  - `GET /api/v1/loan-interest-rates/`\n  - `POST /api/v1/loan-interest-rates/`\n  - `PUT /api/v1/loan-interest-rates/{uuid}/`\n  - `DELETE /api/v1/loan-interest-rates/{uuid}/`\n\n### 4.3. Service Logic\n\n#### 4.3.1. Loan Service\n- **Mô tả**: Xử lý logic khoản vay\n- **Chức năng chính**:\n  1. Quản lý thông tin khoản vay\n  2. Tính toán lãi suất\n  3. Theo dõi thanh toán\n- **Các dependencies**:\n  1. Database Service\n  2. Validation Service\n  3. Payment Service\n- **Sơ đồ luồng xử lý**:\n\n```mermaid\nflowchart TD\n    A[Nhận request] --\u003e B[Validate dữ liệu]\n    B --\u003e C{Dữ liệu hợp lệ?}\n    C --\u003e|Có| D[Xử lý nghiệp vụ]\n    C --\u003e|Không| E[Trả về lỗi]\n    D --\u003e F[Tính toán lãi]\n    F --\u003e G[Cập nhật DB]\n    G --\u003e H[Trả về kết quả]\n    E --\u003e H\n```\n\n### 4.4. Mô Hình Dữ Liệu\n\n#### 4.4.1. Entity Relationship Diagram (ERD)\n\n```mermaid\nerDiagram\n    KHE_UOC ||--o{ LAI_SUAT : has\n    KHE_UOC ||--o{ THANH_TOAN : contains\n    KHE_UOC {\n        uuid id\n        string ma_khe_uoc\n        string ten_khe_uoc\n        string ten_khac\n        int loai_khe_uoc\n        datetime ngay_vay\n        datetime ngay_dao_han\n        decimal tien_vay\n        int trang_thai\n    }\n    LAI_SUAT {\n        uuid id\n        uuid khe_uoc_id\n        float lai_suat\n        datetime hieu_luc_tu\n        string ghi_chu\n    }\n    THANH_TOAN {\n        uuid id\n        uuid khe_uoc_id\n        datetime ngay_thanh_toan\n        decimal so_tien\n        string ghi_chu\n    }\n```\n\n#### 4.4.2. Chi Tiết Bảng Dữ Liệu\n\n##### Bảng: KHE_UOC\n- **Mô tả**: Lưu trữ thông tin khế ước vay\n- **Các trường chính**:\n  - id: UUID (Khóa chính)\n  - ma_khe_uoc: VARCHAR(50)\n  - ten_khe_uoc: VARCHAR(100)\n  - trang_thai: INTEGER\n\n##### Bảng: LAI_SUAT\n- **Mô tả**: Lưu trữ thông tin lãi suất\n- **Các trường chính**:\n  - id: UUID (Khóa chính)\n  - khe_uoc_id: UUID (Khóa ngoại)\n  - lai_suat: DECIMAL\n  - hieu_luc_tu: DATETIME\n\n## 5. Kế Hoạch Kiểm Thử\n\n### 5.1. Phạm Vi Kiểm Thử\n- Kiểm thử tạo/sửa/xóa khoản vay\n- Kiểm thử tính toán lãi suất\n- Kiểm thử ghi nhận thanh toán\n- Kiểm thử báo cáo khoản vay\n\n### 5.2. Kịch Bản Kiểm Thử\n\n| STT | Mã kịch bản | Tên kịch bản | Mô tả | Điều kiện tiên quyết | Các bước | Kết quả mong đợi |\n|-----|------------|--------------|-------|---------------------|----------|-----------------|\n| 1   | TC001 | Tạo khoản vay | Tạo mới khoản vay | Đăng nhập quyền admin | 1. Nhập thông tin\u003cbr\u003e2. Submit form | Tạo thành công |\n| 2   | TC002 | Cập nhật lãi suất | Thay đổi lãi suất | Có khoản vay | 1. Chọn khoản vay\u003cbr\u003e2. Nhập lãi suất\u003cbr\u003e3. Submit | Cập nhật thành công |\n\n## 6. Phụ Lục\n\n### 6.1. Danh Sách Tài Liệu Tham Khảo\n1. Tài liệu thiết kế hệ thống ERP\n2. Quy định về cho vay của ngân hàng nhà nước\n3. Tiêu chuẩn kế toán về khoản vay\n\n### 6.2. Danh Mục Thuật Ngữ\n- ERP: Enterprise Resource Planning\n- API: Application Programming Interface\n- UUID: Universally Unique Identifier\n\n### 6.3. Lịch Sử Thay Đổi Tài Liệu\n\n| Phiên bản | Ngày | Người thực hiện | Mô tả thay đổi |\n|-----------|------|-----------------|---------------|\n| 1.0 | 13/05/2025 | ChatGPT | Tạo mới tài liệu |\n"])</script><script>self.__next_f.push([1,"9:[\"slug\",\"erp/FIN_003_Quan_Ly_Khoan_Vay\",\"c\"]\nf:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"X5KF-BjlTdL2YCafX7ACW\",\"assetPrefix\":\"/erp-docs\",\"initialCanonicalUrl\":\"/erp/FIN_003_Quan_Ly_Khoan_Vay/\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"erp/FIN_003_Quan_Ly_Khoan_Vay\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"erp\\\",\\\"FIN_003_Quan_Ly_Khoan_Vay\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"erp/FIN_003_Quan_Ly_Khoan_Vay\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"$L5\",null,{\"children\":[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-2\",\"children\":\"$undefined\"}],\"$undefined\",\"$undefined\"]}],[\"$\",\"$L6\",null,{\"content\":\"$7\"}]]}]}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__className_985585\",\"children\":[\"$\",\"$Lb\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Ld\"],\"globalErrorComponent\":\"$e\",\"missingSlots\":\"$Wf\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"undefined | ERP Documentation\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"documentation,ERP,technical,mermaid,markdown\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>