<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/erp-docs/_next/static/css/4b73dfd0f7bdc629.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js"/><script src="/erp-docs/_next/static/chunks/7384d974-8b753aa07a0575a2.js" async=""></script><script src="/erp-docs/_next/static/chunks/381-1b6d0728bba7b8e7.js" async=""></script><script src="/erp-docs/_next/static/chunks/main-app-5d87a2fd0f4f2f33.js" async=""></script><script src="/erp-docs/_next/static/chunks/d550ec10-485e3f71f5def856.js" async=""></script><script src="/erp-docs/_next/static/chunks/993-1b6a71072be86da4.js" async=""></script><script src="/erp-docs/_next/static/chunks/410-1ece2fcedd156d2f.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/layout-b6ef60bec0ff2cf2.js" async=""></script><title>undefined | ERP Documentation</title><meta name="keywords" content="documentation,ERP,technical,mermaid,markdown"/><meta name="next-size-adjust"/><script src="/erp-docs/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_985585"><div class="min-h-screen flex items-center justify-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><script src="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[5214,[],\"\"]\n5:I[3040,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"DocLayout\"]\n6:I[1276,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"MDXContent\"]\n8:I[6472,[],\"\"]\na:I[9190,[],\"\"]\nb:I[4550,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"ThemeProvider\"]\nc:I[8910,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"AuthProvider\"]\ne:I[3013,[],\"\"]\n7:T1d94,"])</script><script>self.__next_f.push([1,"# SAL_001_Quản_Lý_Khách_Hàng\n\n*Phiên bản: 1.0*  \n*Người tạo: [Tên Tác Giả]*  \n*Ngày tạo: [DD/MM/YYYY]*  \n*Cập nhật lần cuối: [DD/MM/YYYY]*  \n*Người cập nhật: [Tên Người Cập Nhật]*\n\n---\n\n## 1. Tổng Quan Nghiệp Vụ\n\n### 1.1. Mô Tả Nghiệp Vụ\nQuản lý toàn bộ thông tin khách hàng (Customer), bao gồm tạo mới, cập nhật, xóa, tìm kiếm, phân loại nhóm khách hàng, quản lý trạng thái hoạt động, liên kết với nhân viên bán hàng, tài khoản, phương thức thanh toán, hạn mức tín dụng, khu vực, thông tin liên hệ, v.v. Đảm bảo dữ liệu khách hàng đầy đủ, chính xác, phục vụ các nghiệp vụ bán hàng, hóa đơn, báo cáo và chăm sóc khách hàng.\n\n### 1.2. Phạm Vi Áp Dụng\nÁp dụng cho bộ phận bán hàng, kế toán, quản lý khách hàng, quản trị hệ thống và các phòng ban liên quan.\n\n### 1.3. Định Nghĩa Thuật Ngữ\n- **Khách hàng (Customer):** Đối tượng mua hàng hóa/dịch vụ của doanh nghiệp.\n- **Nhóm khách hàng:** Phân loại khách hàng theo các tiêu chí (VIP, thường, tiềm năng...)\n- **Hạn mức tín dụng:** Số tiền tối đa khách hàng được nợ.\n- **Trạng thái:** Hoạt động/Không hoạt động/Ẩn trên giao diện.\n\n### 1.4. Tài Liệu Liên Quan\n- [SAL_002_Quản Lý Nhóm Khách Hàng](./SAL_002_Quan_Ly_Nhom_Khach_Hang.md)\n- [SAL_004_Quản Lý Hóa Đơn Bán Hàng](./SAL_004_Quan_Ly_Hoa_Don_Ban_Hang.md)\n\n---\n\n## 2. Quy Trình Nghiệp Vụ\n\n### 2.1. Tổng Quan Quy Trình\nKhởi tạo, cập nhật, tìm kiếm, phân loại, quản lý trạng thái khách hàng. Kết nối với các nghiệp vụ bán hàng, hóa đơn, báo cáo.\n\n### 2.2. Sơ Đồ Quy Trình (Business Flow)\n```mermaid\nflowchart TD\n    A[Khởi tạo khách hàng] --\u003e B{Kiểm tra thông tin bắt buộc}\n    B -- Đầy đủ --\u003e C[Lưu vào hệ thống]\n    B -- Thiếu --\u003e D[Thông báo lỗi]\n    C --\u003e E[Phân loại nhóm khách hàng]\n    E --\u003e F[Liên kết nhân viên phụ trách]\n    F --\u003e G[Quản lý trạng thái]\n    G --\u003e H[Khách hàng sẵn sàng sử dụng cho nghiệp vụ bán hàng]\n```\n\n### 2.3. Chi Tiết Các Bước Quy Trình\n1. Nhập thông tin khách hàng (tên, mã, địa chỉ, MST, liên hệ, nhóm, trạng thái...)\n2. Kiểm tra thông tin bắt buộc (tên, mã, trạng thái...)\n3. Lưu dữ liệu vào hệ thống\n4. Phân loại nhóm khách hàng (VIP, thường...)\n5. Liên kết nhân viên phụ trách, tài khoản, phương thức thanh toán\n6. Quản lý trạng thái (hoạt động/không hoạt động/ẩn)\n7. Sử dụng khách hàng cho các nghiệp vụ bán hàng, hóa đơn, báo cáo\n\n### 2.4. Sơ Đồ Tuần Tự (Sequence Diagram)\n```mermaid\nsequenceDiagram\n    participant User\n    participant UI\n    participant API\n    participant DB\n    User-\u003e\u003eUI: Nhập thông tin khách hàng\n    UI-\u003e\u003eAPI: Gửi yêu cầu tạo/cập nhật khách hàng\n    API-\u003e\u003eDB: Kiểm tra \u0026 lưu dữ liệu\n    DB--\u003e\u003eAPI: Trả về kết quả\n    API--\u003e\u003eUI: Thông báo thành công/thất bại\n    UI--\u003e\u003eUser: Hiển thị kết quả\n```\n\n### 2.5. Luồng Nghiệp Vụ Thay Thế\n- Nếu thông tin bắt buộc thiếu: hệ thống báo lỗi, yêu cầu nhập lại.\n- Nếu mã khách hàng trùng: báo lỗi, không cho lưu.\n- Nếu khách hàng không hoạt động: không cho chọn khi lập hóa đơn mới.\n\n---\n\n## 3. Yêu Cầu Chức Năng\n\n### 3.1. Danh Sách Chức Năng\n- Thêm mới khách hàng\n- Cập nhật thông tin khách hàng\n- Xóa khách hàng\n- Tìm kiếm, lọc khách hàng\n- Phân loại nhóm khách hàng\n- Quản lý trạng thái hoạt động/ẩn\n- Liên kết nhân viên phụ trách, tài khoản, phương thức thanh toán\n\n### 3.2. Chi Tiết Chức Năng\n| Chức năng | Mô tả |\n|-----------|-------|\n| Thêm mới | Nhập thông tin, kiểm tra, lưu vào DB |\n| Cập nhật | Sửa thông tin, kiểm tra, lưu lại |\n| Xóa | Xóa mềm (đánh dấu không hoạt động) |\n| Tìm kiếm | Theo tên, mã, nhóm, trạng thái... |\n| Phân loại | Gán nhóm khách hàng |\n| Liên kết | Gán nhân viên, tài khoản, phương thức thanh toán |\n| Quản lý trạng thái | Đổi trạng thái hoạt động/ẩn |\n\n---\n\n## 4. Thiết Kế Kỹ Thuật\n\n### 4.1. Kiến Trúc Hệ Thống\n- Model: `CustomerModel` (file: `django_ledger/models/customer.py`)\n- Service: (nằm trong các nghiệp vụ liên quan, ví dụ: group, payment, ...)\n- Serializer: `CustomerModelSerializer` (file: `django_ledger/api/serializers/customer.py`)\n- API/View: (file: `django_ledger/api/views/customer_erp.py`)\n\n### 4.2. API Endpoints (ví dụ)\n| Method | Endpoint | Mô tả |\n|--------|----------|-------|\n| GET | /api/customers/ | Danh sách khách hàng |\n| POST | /api/customers/ | Thêm mới khách hàng |\n| GET | /api/customers/{uuid}/ | Xem chi tiết khách hàng |\n| PUT/PATCH | /api/customers/{uuid}/ | Cập nhật khách hàng |\n| DELETE | /api/customers/{uuid}/ | Xóa khách hàng |\n\n### 4.3. Service Logic (tóm tắt)\n- Kiểm tra thông tin đầu vào, validate dữ liệu\n- Sinh mã khách hàng tự động nếu chưa có\n- Kiểm tra trùng mã, trạng thái\n- Lưu dữ liệu, cập nhật liên kết nhóm, nhân viên, tài khoản, phương thức thanh toán\n\n### 4.4. Mô Hình Dữ Liệu (trích yếu)\n| Trường | Kiểu | Mô tả |\n|--------|------|-------|\n| uuid | UUID | Khóa chính |\n| customer_name | str | Tên khách hàng |\n| customer_code | str | Mã khách hàng |\n| address | str | Địa chỉ |\n| tax_code | str | Mã số thuế |\n| contact_person | str | Người liên hệ |\n| sales_rep | FK | Nhân viên phụ trách |\n| account | FK | Tài khoản mặc định |\n| payment_term | FK | Điều kiện thanh toán |\n| payment_method | FK | Hình thức thanh toán |\n| credit_limit | decimal | Hạn mức tín dụng |\n| region | FK | Khu vực |\n| phone | str | Điện thoại |\n| email | str | Email |\n| status | str | Trạng thái |\n| ... | ... | ... |\n\n---\n\n## 5. Kế Hoạch Kiểm Thử\n\n### 5.1. Phạm Vi Kiểm Thử\n- Thêm, sửa, xóa, tìm kiếm, phân loại, đổi trạng thái khách hàng\n\n### 5.2. Kịch Bản Kiểm Thử (ví dụ)\n| STT | Bước kiểm thử | Kết quả mong đợi |\n|-----|---------------|------------------|\n| 1 | Thêm mới khách hàng với đủ thông tin | Thành công |\n| 2 | Thêm mới thiếu trường bắt buộc | Báo lỗi |\n| 3 | Thêm mới trùng mã khách hàng | Báo lỗi |\n| 4 | Sửa thông tin khách hàng | Thành công |\n| 5 | Xóa khách hàng | Không còn trong danh sách hoạt động |\n| 6 | Tìm kiếm theo tên/mã | Đúng kết quả |\n| 7 | Đổi trạng thái hoạt động/ẩn | Đúng trạng thái |\n\n---\n\n## 6. Phụ Lục\n\n### 6.1. Danh Sách Tài Liệu Tham Khảo\n- Source code: `django_ledger/models/customer.py`, `django_ledger/api/serializers/customer.py`, `django_ledger/api/views/customer_erp.py`\n- Tài liệu nghiệp vụ liên quan: [SAL_002_Quản Lý Nhóm Khách Hàng](./SAL_002_Quan_Ly_Nhom_Khach_Hang.md)\n\n### 6.2. Danh Mục Thuật Ngữ\n- Customer, Group, Sales Rep, Payment Term, Payment Method, Credit Limit, Region, ...\n\n### 6.3. Lịch Sử Thay Đổi Tài Liệu\n| Ngày | Người thay đổi | Nội dung |\n|------|----------------|----------|\n| [DD/MM/YYYY] | [Tên] | Tạo mới |\n\n\n\u003c/rewritten_file\u003e "])</script><script>self.__next_f.push([1,"9:[\"slug\",\"erp/SAL_001_Quan_Ly_Khach_Hang\",\"c\"]\nf:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"X5KF-BjlTdL2YCafX7ACW\",\"assetPrefix\":\"/erp-docs\",\"initialCanonicalUrl\":\"/erp/SAL_001_Quan_Ly_Khach_Hang/\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"erp/SAL_001_Quan_Ly_Khach_Hang\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"erp\\\",\\\"SAL_001_Quan_Ly_Khach_Hang\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"erp/SAL_001_Quan_Ly_Khach_Hang\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"$L5\",null,{\"children\":[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-2\",\"children\":\"$undefined\"}],\"$undefined\",\"$undefined\"]}],[\"$\",\"$L6\",null,{\"content\":\"$7\"}]]}]}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__className_985585\",\"children\":[\"$\",\"$Lb\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Ld\"],\"globalErrorComponent\":\"$e\",\"missingSlots\":\"$Wf\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"undefined | ERP Documentation\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"documentation,ERP,technical,mermaid,markdown\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>