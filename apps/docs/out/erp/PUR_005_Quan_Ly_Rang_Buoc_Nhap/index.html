<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/erp-docs/_next/static/css/4b73dfd0f7bdc629.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js"/><script src="/erp-docs/_next/static/chunks/7384d974-8b753aa07a0575a2.js" async=""></script><script src="/erp-docs/_next/static/chunks/381-1b6d0728bba7b8e7.js" async=""></script><script src="/erp-docs/_next/static/chunks/main-app-5d87a2fd0f4f2f33.js" async=""></script><script src="/erp-docs/_next/static/chunks/d550ec10-485e3f71f5def856.js" async=""></script><script src="/erp-docs/_next/static/chunks/993-1b6a71072be86da4.js" async=""></script><script src="/erp-docs/_next/static/chunks/410-1ece2fcedd156d2f.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/layout-b6ef60bec0ff2cf2.js" async=""></script><title>undefined | ERP Documentation</title><meta name="keywords" content="documentation,ERP,technical,mermaid,markdown"/><meta name="next-size-adjust"/><script src="/erp-docs/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_985585"><div class="min-h-screen flex items-center justify-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><script src="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[5214,[],\"\"]\n5:I[3040,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"DocLayout\"]\n6:I[1276,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"MDXContent\"]\n8:I[6472,[],\"\"]\na:I[9190,[],\"\"]\nb:I[4550,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"ThemeProvider\"]\nc:I[8910,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"AuthProvider\"]\ne:I[3013,[],\"\"]\n7:T5492,"])</script><script>self.__next_f.push([1,"# PUR_005_Quản Lý Ràng Buộc Nhập\n\n*Phiên bản: 1.1*  \n*Người tạo: Auto Generated*  \n*Ngày tạo: 25/07/2023*  \n*Cập nhật lần cuối: 09/07/2024*  \n*Người cập nhật: AI Assistant*\n\n## 1. Tổng Quan Nghiệp Vụ\n\n### 1.1. Mô Tả Nghiệp Vụ\nQuản lý ràng buộc nhập là quy trình thiết lập và quản lý các điều kiện, ràng buộc khi thực hiện ghi chép kế toán liên quan đến các tài khoản trong hệ thống. Mỗi tài khoản có thể có một hoặc nhiều ràng buộc cần phải nhập khi thực hiện ghi chép kế toán, ví dụ như bộ phận, dự án, hoặc các thông tin bắt buộc khác. Hệ thống cho phép cấu hình các ràng buộc này là bắt buộc hoặc không bắt buộc, đảm bảo tính chính xác và đầy đủ của dữ liệu kế toán. Quy trình này giúp doanh nghiệp kiểm soát chặt chẽ quá trình nhập liệu, ngăn ngừa rủi ro sai sót và đảm bảo tính hiệu quả trong quản lý kế toán.\n\n### 1.2. Phạm Vi Áp Dụng\nQuy trình này áp dụng cho tất cả các hoạt động liên quan đến nhập hàng vào kho trong doanh nghiệp, bao gồm:\n- Bộ phận kho\n- Bộ phận mua hàng\n- Bộ phận kiểm soát chất lượng\n- Kế toán kho\n- Người quản lý có liên quan đến quá trình phê duyệt\n\n### 1.3. Định Nghĩa Thuật Ngữ\n| Thuật ngữ | Định nghĩa |\n|-----------|------------|\n| AccountConstraintModel | Model đại diện cho các ràng buộc/yêu cầu cho các bút toán tài khoản |\n| Ràng buộc nhập | Các điều kiện, quy định bắt buộc phải tuân thủ khi nhập dữ liệu kế toán |\n| constraint_code | Mã đại diện cho ràng buộc (ví dụ: BP cho Bộ phận, VV cho Vụ việc) |\n| constraint_line | Số thứ tự dòng/trật tự của ràng buộc |\n| constraint_name | Tên người đọc được của ràng buộc |\n| is_mandatory | Trường Boolean xác định ràng buộc này có bắt buộc hay không |\n| Account | Tài khoản kế toán mà ràng buộc được áp dụng |\n\n### 1.4. Tài Liệu Liên Quan\n\n| STT | Mã tài liệu | Tên tài liệu | Mô tả |\n|-----|-------------|--------------|-------|\n| 1   | ACC_001 | Sơ Đồ Tài Khoản | Quy trình thiết lập và quản lý hệ thống tài khoản kế toán |\n| 2   | ACC_003 | Bút Toán Kế Toán | Quy trình tạo và quản lý các bút toán |\n| 3   | PUR_002 | Quản Lý Đơn Mua Hàng | Quy trình tạo và quản lý đơn mua hàng |\n| 4   | PUR_003 | Quản Lý Hóa Đơn Mua Vào | Quy trình quản lý hóa đơn mua vào |\n\n## 2. Quy Trình Nghiệp Vụ\n\n### 2.1. Tổng Quan Quy Trình\nQuy trình quản lý ràng buộc nhập bao gồm việc thiết lập các ràng buộc cho các tài khoản kế toán, xác định tính bắt buộc của mỗi ràng buộc, áp dụng các ràng buộc này trong quá trình nhập liệu kế toán, kiểm tra sự tuân thủ, và xử lý các trường hợp ngoại lệ. Quy trình này đảm bảo dữ liệu kế toán được ghi nhận đầy đủ các thông tin cần thiết theo yêu cầu quản lý của doanh nghiệp.\n\n### 2.2. Sơ Đồ Quy Trình (Business Flow)\n\n```mermaid\nflowchart TD\n    A[Bắt đầu] --\u003e B[Xác định loại ràng buộc nhập cần thiết lập]\n    B --\u003e C[Thiết lập ràng buộc nhập cho sản phẩm/nhà cung cấp]\n    C --\u003e D[Lưu cấu hình ràng buộc vào hệ thống]\n    D --\u003e E[Áp dụng ràng buộc trong quá trình nhập kho]\n    E --\u003e F{Kiểm tra ràng buộc}\n    F --\u003e|Thỏa mãn| G[Chấp nhận nhập kho]\n    F --\u003e|Không thỏa mãn| H[Yêu cầu xử lý ngoại lệ]\n    H --\u003e I[Đánh giá mức độ vi phạm]\n    I --\u003e J{Có thể chấp nhận?}\n    J --\u003e|Có| K[Ghi nhận ngoại lệ và phê duyệt]\n    J --\u003e|Không| L[Từ chối nhập kho]\n    K --\u003e M[Nhập kho với ghi chú ngoại lệ]\n    G --\u003e N[Cập nhật thông tin nhập kho]\n    M --\u003e N\n    L --\u003e O[Thông báo cho nhà cung cấp/bộ phận liên quan]\n    O --\u003e P[Giải quyết vấn đề]\n    P --\u003e E\n    N --\u003e Q[Đánh giá hiệu quả của ràng buộc]\n    Q --\u003e R{Cần điều chỉnh?}\n    R --\u003e|Có| S[Cập nhật ràng buộc]\n    S --\u003e D\n    R --\u003e|Không| T[Kết thúc]\n```\n\n### 2.3. Chi Tiết Các Bước Quy Trình\n\n#### 2.3.1. Xác định và thiết lập ràng buộc nhập\n- **Mô tả**: Xác định các loại ràng buộc cần thiết và thiết lập điều kiện cụ thể\n- **Đầu vào**: Yêu cầu nghiệp vụ, đặc tính sản phẩm, quy định của doanh nghiệp\n- **Đầu ra**: Danh sách ràng buộc được thiết lập\n- **Người thực hiện**: Quản lý kho, quản lý mua hàng\n- **Điều kiện tiên quyết**: Đã có thông tin đầy đủ về sản phẩm, nhà cung cấp\n- **Xử lý ngoại lệ**: Tham khảo ý kiến từ bộ phận chuyên môn nếu cần\n\n#### 2.3.2. Áp dụng ràng buộc trong quá trình nhập kho\n- **Mô tả**: Sử dụng các ràng buộc đã thiết lập khi tiến hành nhập hàng\n- **Đầu vào**: Thông tin hàng nhập, ràng buộc đã thiết lập\n- **Đầu ra**: Kết quả kiểm tra ràng buộc\n- **Người thực hiện**: Nhân viên kho\n- **Điều kiện tiên quyết**: Ràng buộc đã được thiết lập trong hệ thống\n- **Xử lý ngoại lệ**: Báo cáo trường hợp không đáp ứng ràng buộc\n\n#### 2.3.3. Xử lý ngoại lệ\n- **Mô tả**: Đánh giá và xử lý các trường hợp không đáp ứng ràng buộc\n- **Đầu vào**: Thông tin vi phạm ràng buộc\n- **Đầu ra**: Quyết định chấp nhận hoặc từ chối\n- **Người thực hiện**: Quản lý kho, người có thẩm quyền\n- **Điều kiện tiên quyết**: Đã phát hiện trường hợp vi phạm ràng buộc\n- **Xử lý ngoại lệ**: Ghi nhận lý do chấp nhận ngoại lệ nếu được phê duyệt\n\n#### 2.3.4. Đánh giá và cập nhật ràng buộc\n- **Mô tả**: Đánh giá hiệu quả của ràng buộc và điều chỉnh nếu cần\n- **Đầu vào**: Dữ liệu về việc áp dụng ràng buộc, phản hồi từ người dùng\n- **Đầu ra**: Ràng buộc được cập nhật\n- **Người thực hiện**: Quản lý kho, quản lý mua hàng\n- **Điều kiện tiên quyết**: Đã thu thập đủ dữ liệu để đánh giá\n- **Xử lý ngoại lệ**: Xem xét các yếu tố thị trường, thay đổi trong chuỗi cung ứng\n\n### 2.4. Sơ Đồ Tuần Tự (Sequence Diagram)\n\n```mermaid\nsequenceDiagram\n    participant Admin as Quản trị viên\n    participant System as Hệ thống\n    participant Warehouse as Nhân viên kho\n    participant Manager as Quản lý\n    participant Supplier as Nhà cung cấp\n    \n    Admin-\u003e\u003eSystem: Thiết lập ràng buộc nhập\n    System--\u003e\u003eAdmin: Xác nhận thiết lập\n    \n    Warehouse-\u003e\u003eSystem: Tạo phiếu nhập kho\n    System-\u003e\u003eSystem: Kiểm tra ràng buộc\n    \n    alt Thỏa mãn ràng buộc\n        System--\u003e\u003eWarehouse: Cho phép nhập kho\n        Warehouse-\u003e\u003eSystem: Xác nhận nhập kho\n        System-\u003e\u003eSystem: Cập nhật tồn kho\n    else Vi phạm ràng buộc\n        System--\u003e\u003eWarehouse: Thông báo vi phạm\n        Warehouse-\u003e\u003eManager: Yêu cầu xem xét ngoại lệ\n        \n        alt Chấp nhận ngoại lệ\n            Manager-\u003e\u003eSystem: Phê duyệt ngoại lệ\n            System--\u003e\u003eWarehouse: Cho phép nhập kho với ghi chú\n            Warehouse-\u003e\u003eSystem: Xác nhận nhập kho\n            System-\u003e\u003eSystem: Cập nhật tồn kho + ghi nhận ngoại lệ\n        else Từ chối ngoại lệ\n            Manager-\u003e\u003eWarehouse: Từ chối phê duyệt\n            Warehouse-\u003e\u003eSupplier: Thông báo không đáp ứng yêu cầu\n            Supplier-\u003e\u003eWarehouse: Cung cấp hàng mới/điều chỉnh\n            Warehouse-\u003e\u003eSystem: Tạo phiếu nhập kho mới\n        end\n    end\n    \n    Admin-\u003e\u003eSystem: Xem báo cáo vi phạm ràng buộc\n    System--\u003e\u003eAdmin: Hiển thị báo cáo\n    Admin-\u003e\u003eSystem: Điều chỉnh ràng buộc (nếu cần)\n```\n\n### 2.5. Luồng Nghiệp Vụ Thay Thế\n- **Ràng buộc tạm thời**: Trong một số trường hợp đặc biệt (như mùa cao điểm, sự kiện đặc biệt), có thể thiết lập các ràng buộc tạm thời với độ nghiêm ngặt khác với ràng buộc thông thường\n- **Ràng buộc theo lô hàng**: Áp dụng các ràng buộc khác nhau cho từng lô hàng cụ thể dựa trên yêu cầu đặc biệt của dự án hoặc đơn hàng\n- **Quy trình nhập khẩn cấp**: Trong trường hợp khẩn cấp, có thể áp dụng quy trình rút gọn với các ràng buộc tối thiểu, nhưng phải có sự phê duyệt từ cấp quản lý cao\n\n## 3. Yêu Cầu Chức Năng\n\n### 3.1. Danh Sách Chức Năng\n\n| STT | Mã chức năng | Tên chức năng | Mô tả | Độ ưu tiên |\n|-----|--------------|---------------|-------|------------|\n| 1   | RB_LIST | Xem danh sách ràng buộc | Hiển thị danh sách các ràng buộc nhập với bộ lọc và tìm kiếm | Cao |\n| 2   | RB_CREATE | Tạo ràng buộc mới | Thêm ràng buộc nhập mới vào hệ thống | Cao |\n| 3   | RB_UPDATE | Cập nhật ràng buộc | Chỉnh sửa thông tin ràng buộc | Cao |\n| 4   | RB_VIEW | Xem chi tiết ràng buộc | Xem toàn bộ thông tin chi tiết của ràng buộc | Cao |\n| 5   | RB_DELETE | Xóa ràng buộc | Xóa ràng buộc khỏi hệ thống | Trung bình |\n| 6   | RB_APPLY | Áp dụng ràng buộc | Sử dụng ràng buộc khi nhập kho | Cao |\n| 7   | RB_EXCEPTION | Quản lý ngoại lệ | Xử lý các trường hợp ngoại lệ không đáp ứng ràng buộc | Cao |\n| 8   | RB_REPORT | Báo cáo vi phạm | Tạo báo cáo về các vi phạm ràng buộc | Trung bình |\n\n### 3.2. Chi Tiết Chức Năng\n\n#### 3.2.1. RB_CREATE: Tạo ràng buộc mới\n- **Mô tả**: Cho phép người dùng tạo ràng buộc nhập mới trong hệ thống\n- **Đầu vào**: Thông tin ràng buộc (loại ràng buộc, đối tượng áp dụng, điều kiện, giá trị)\n- **Đầu ra**: Bản ghi ràng buộc mới trong hệ thống\n- **Điều kiện tiên quyết**: Người dùng đã đăng nhập và có quyền tạo ràng buộc\n- **Luồng xử lý chính**:\n  1. Người dùng chọn \"Tạo ràng buộc mới\"\n  2. Hệ thống hiển thị form nhập thông tin\n  3. Người dùng chọn loại ràng buộc (chất lượng, số lượng, thời gian...)\n  4. Người dùng chọn đối tượng áp dụng (sản phẩm, nhà cung cấp, kho...)\n  5. Người dùng thiết lập điều kiện và giá trị giới hạn\n  6. Người dùng nhấn \"Lưu\"\n  7. Hệ thống kiểm tra tính hợp lệ của dữ liệu\n  8. Hệ thống lưu ràng buộc mới và hiển thị thông báo thành công\n- **Luồng xử lý thay thế/ngoại lệ**:\n  1. Nếu dữ liệu không hợp lệ, hiển thị thông báo lỗi\n  2. Nếu ràng buộc mâu thuẫn với ràng buộc khác, cảnh báo người dùng\n- **Giao diện liên quan**: Form tạo ràng buộc\n\n#### 3.2.2. RB_APPLY: Áp dụng ràng buộc\n- **Mô tả**: Cho phép áp dụng ràng buộc trong quá trình nhập kho\n- **Đầu vào**: Thông tin phiếu nhập kho, danh sách ràng buộc áp dụng\n- **Đầu ra**: Kết quả kiểm tra ràng buộc\n- **Điều kiện tiên quyết**: Đang thực hiện nhập kho, ràng buộc đã được thiết lập\n- **Luồng xử lý chính**:\n  1. Người dùng tạo phiếu nhập kho\n  2. Hệ thống tự động áp dụng các ràng buộc liên quan\n  3. Hệ thống kiểm tra từng mục trong phiếu nhập với ràng buộc tương ứng\n  4. Hệ thống hiển thị kết quả kiểm tra (đạt/không đạt)\n  5. Nếu tất cả đều đạt, cho phép hoàn tất nhập kho\n- **Luồng xử lý thay thế/ngoại lệ**:\n  1. Nếu có mục không đạt, hiển thị thông báo chi tiết\n  2. Cho phép người dùng yêu cầu phê duyệt ngoại lệ\n- **Giao diện liên quan**: Màn hình nhập kho, form kiểm tra ràng buộc\n\n## 4. Thiết Kế Kỹ Thuật\n\n### 4.1. Kiến Trúc Hệ Thống\n\n```mermaid\nflowchart TD\n    A[Client] --\u003e B[API Gateway]\n    B --\u003e C[RangBuocNhapService]\n    C --\u003e D[RangBuocNhapRepository]\n    C --\u003e E[ProductService]\n    E --\u003e F[ProductRepository]\n    C --\u003e G[SupplierService]\n    G --\u003e H[SupplierRepository]\n    C --\u003e I[WarehouseService]\n    I --\u003e J[WarehouseRepository]\n    D --\u003e K[(Database)]\n    F --\u003e K\n    H --\u003e K\n    J --\u003e K\n```\n\n### 4.2. API Endpoints\n\n#### 4.2.1. Lấy danh sách ràng buộc nhập\n- **Mô tả**: Trả về danh sách ràng buộc nhập theo điều kiện lọc\n- **URL**: `GET /api/v1/entity/{entity_slug}/rang-buoc-nhap/`\n- **Query Parameters**:\n  - `loai_rang_buoc`: Lọc theo loại ràng buộc\n  - `doi_tuong`: Lọc theo đối tượng áp dụng (sản phẩm, nhà cung cấp...)\n  - `id_doi_tuong`: ID của đối tượng áp dụng\n  - `trang_thai`: Lọc theo trạng thái (active/inactive)\n  - `search`: Từ khóa tìm kiếm\n  - `page`: Số trang\n  - `page_size`: Số bản ghi trên mỗi trang\n  - `ordering`: Trường sắp xếp\n- **Response**: Danh sách ràng buộc nhập, phân trang\n\n#### 4.2.2. Lấy chi tiết ràng buộc nhập\n- **Mô tả**: Trả về thông tin chi tiết của một ràng buộc nhập\n- **URL**: `GET /api/v1/entity/{entity_slug}/rang-buoc-nhap/{uuid}/`\n- **Response**: Chi tiết ràng buộc nhập\n\n#### 4.2.3. Tạo ràng buộc nhập mới\n- **Mô tả**: Tạo ràng buộc nhập mới trong hệ thống\n- **URL**: `POST /api/v1/entity/{entity_slug}/rang-buoc-nhap/`\n- **Request Body**: Thông tin ràng buộc nhập\n- **Response**: Thông tin ràng buộc nhập đã tạo\n\n#### 4.2.4. Cập nhật ràng buộc nhập\n- **Mô tả**: Cập nhật thông tin ràng buộc nhập\n- **URL**: `PUT /api/v1/entity/{entity_slug}/rang-buoc-nhap/{uuid}/`\n- **Request Body**: Thông tin cập nhật\n- **Response**: Thông tin ràng buộc nhập đã cập nhật\n\n#### 4.2.5. Kiểm tra áp dụng ràng buộc\n- **Mô tả**: Kiểm tra một loạt mục có đáp ứng ràng buộc hay không\n- **URL**: `POST /api/v1/entity/{entity_slug}/rang-buoc-nhap/check/`\n- **Request Body**: Danh sách mục cần kiểm tra\n- **Response**: Kết quả kiểm tra từng mục\n\n### 4.3. Service Logic\n\n#### 4.3.1. RangBuocNhapService\n- **Mô tả**: Xử lý logic nghiệp vụ liên quan đến quản lý ràng buộc nhập\n- **Chức năng chính**:\n  1. Tạo và quản lý ràng buộc nhập\n  2. Áp dụng ràng buộc khi nhập kho\n  3. Kiểm tra sự tuân thủ\n  4. Xử lý ngoại lệ\n  5. Báo cáo vi phạm\n- **Các dependencies**:\n  1. RangBuocNhapRepository\n  2. ProductService\n  3. SupplierService\n  4. WarehouseService\n- **Sơ đồ luồng xử lý**:\n\n```mermaid\nflowchart TD\n    A[Nhận request] --\u003e B[Validate dữ liệu]\n    B --\u003e C{Dữ liệu hợp lệ?}\n    C --\u003e|Có| D[Xử lý business logic]\n    C --\u003e|Không| E[Trả về lỗi]\n    D --\u003e F{Loại thao tác?}\n    F --\u003e|Tạo/Cập nhật| G[Lưu ràng buộc]\n    F --\u003e|Kiểm tra áp dụng| H[Áp dụng ràng buộc]\n    F --\u003e|Xử lý ngoại lệ| I[Phê duyệt ngoại lệ]\n    G --\u003e J[Kiểm tra tính nhất quán]\n    H --\u003e K[So sánh với điều kiện]\n    I --\u003e L[Ghi nhận lý do phê duyệt]\n    J --\u003e M[Ghi log]\n    K --\u003e M\n    L --\u003e M\n    M --\u003e N[Trả về kết quả]\n    E --\u003e M\n```\n\n### 4.4. Mô Hình Dữ Liệu\n\n#### 4.4.1. Entity Relationship Diagram (ERD)\n\n```mermaid\nerDiagram\n    EntityModel ||--o{ RangBuocNhapModel : \"có\"\n    RangBuocNhapModel ||--o{ RangBuocNhapDetailModel : \"có\"\n    \n    RangBuocNhapModel {\n        UUID uuid PK\n        FK EntityModel entity_model\n        String ma_rang_buoc\n        String ten_rang_buoc\n        String mo_ta\n        Int trang_thai\n        DateTime created\n        DateTime updated\n    }\n    \n    RangBuocNhapDetailModel {\n        UUID uuid PK\n        FK RangBuocNhapModel rang_buoc_nhap\n        String loai_rang_buoc\n        String loai_doi_tuong\n        String id_doi_tuong\n        String ten_doi_tuong\n        String dieu_kien\n        String gia_tri\n        String thong_bao\n        Int muc_do\n        Int cho_phep_ngoai_le\n        Int trang_thai\n    }\n    \n    RangBuocNhapExceptionModel {\n        UUID uuid PK\n        FK RangBuocNhapDetailModel rang_buoc_detail\n        FK PhieuNhapKhoModel phieu_nhap_kho\n        String ly_do\n        FK UserModel nguoi_phe_duyet\n        DateTime ngay_phe_duyet\n        String ghi_chu\n    }\n```\n\n#### 4.4.2. Chi Tiết Bảng Dữ Liệu\n\n##### Bảng: RangBuocNhapModel\n- **Mô tả**: Lưu trữ thông tin về nhóm ràng buộc nhập\n- **Các trường chính**:\n  - `uuid`: Khóa chính, định danh duy nhất\n  - `entity_model`: Khóa ngoại tham chiếu đến EntityModel\n  - `ma_rang_buoc`: Mã ràng buộc\n  - `ten_rang_buoc`: Tên ràng buộc\n  - `mo_ta`: Mô tả chi tiết về ràng buộc\n  - `trang_thai`: Trạng thái (1: active, 0: inactive)\n  - `created`: Thời gian tạo\n  - `updated`: Thời gian cập nhật\n\n##### Bảng: RangBuocNhapDetailModel\n- **Mô tả**: Lưu trữ chi tiết các điều kiện của ràng buộc\n- **Các trường chính**:\n  - `uuid`: Khóa chính, định danh duy nhất\n  - `rang_buoc_nhap`: Khóa ngoại tham chiếu đến RangBuocNhapModel\n  - `loai_rang_buoc`: Loại ràng buộc (chất lượng, số lượng, thời gian...)\n  - `loai_doi_tuong`: Loại đối tượng áp dụng (sản phẩm, nhà cung cấp, kho...)\n  - `id_doi_tuong`: ID của đối tượng áp dụng\n  - `ten_doi_tuong`: Tên của đối tượng áp dụng\n  - `dieu_kien`: Điều kiện áp dụng (=, \u003e, \u003c, \u003e=, \u003c=, between...)\n  - `gia_tri`: Giá trị của điều kiện\n  - `thong_bao`: Thông báo khi vi phạm ràng buộc\n  - `muc_do`: Mức độ nghiêm trọng (1: cảnh báo, 2: lỗi)\n  - `cho_phep_ngoai_le`: Có cho phép ngoại lệ hay không (1: có, 0: không)\n  - `trang_thai`: Trạng thái (1: active, 0: inactive)\n\n##### Bảng: RangBuocNhapExceptionModel\n- **Mô tả**: Lưu trữ thông tin về các ngoại lệ đã được phê duyệt\n- **Các trường chính**:\n  - `uuid`: Khóa chính, định danh duy nhất\n  - `rang_buoc_detail`: Khóa ngoại tham chiếu đến RangBuocNhapDetailModel\n  - `phieu_nhap_kho`: Khóa ngoại tham chiếu đến PhieuNhapKhoModel\n  - `ly_do`: Lý do chấp nhận ngoại lệ\n  - `nguoi_phe_duyet`: Khóa ngoại tham chiếu đến UserModel\n  - `ngay_phe_duyet`: Ngày phê duyệt ngoại lệ\n  - `ghi_chu`: Ghi chú thêm\n\n## 5. Kế Hoạch Kiểm Thử\n\n### 5.1. Phạm Vi Kiểm Thử\nKiểm thử sẽ bao gồm tất cả các chức năng liên quan đến quản lý ràng buộc nhập, bao gồm:\n- Tạo mới ràng buộc nhập\n- Cập nhật ràng buộc nhập\n- Áp dụng ràng buộc trong quá trình nhập kho\n- Xử lý các trường hợp ngoại lệ\n- Báo cáo vi phạm ràng buộc\n\n### 5.2. Kịch Bản Kiểm Thử\n\n| STT | Mã kịch bản | Tên kịch bản | Mô tả | Điều kiện tiên quyết | Các bước | Kết quả mong đợi |\n|-----|------------|--------------|-------|---------------------|----------|-----------------|\n| 1   | TC_RB_C01 | Tạo ràng buộc mới thành công | Kiểm tra việc tạo ràng buộc mới | Người dùng đã đăng nhập và có quyền | 1. Truy cập form tạo ràng buộc\u003cbr\u003e2. Nhập thông tin hợp lệ\u003cbr\u003e3. Nhấn Lưu | Ràng buộc mới được tạo thành công |\n| 2   | TC_RB_C02 | Tạo ràng buộc với dữ liệu thiếu | Kiểm tra validate dữ liệu bắt buộc | Người dùng đã đăng nhập | 1. Truy cập form tạo ràng buộc\u003cbr\u003e2. Bỏ trống các trường bắt buộc\u003cbr\u003e3. Nhấn Lưu | Hiển thị thông báo lỗi về các trường bắt buộc |\n| 3   | TC_RB_A01 | Áp dụng ràng buộc khi nhập kho | Kiểm tra áp dụng ràng buộc | Đã có ràng buộc và đang nhập kho | 1. Tạo phiếu nhập kho\u003cbr\u003e2. Nhập thông tin vi phạm ràng buộc\u003cbr\u003e3. Xác nhận | Hệ thống thông báo vi phạm ràng buộc |\n| 4   | TC_RB_E01 | Xử lý ngoại lệ | Kiểm tra quy trình xử lý ngoại lệ | Đã có vi phạm ràng buộc | 1. Yêu cầu xử lý ngoại lệ\u003cbr\u003e2. Phê duyệt ngoại lệ | Hệ thống cho phép nhập kho với ghi chú ngoại lệ |\n\n## 6. Phụ Lục\n\n### 6.1. Danh Sách Tài Liệu Tham Khảo\n1. Tài liệu thiết kế cơ sở dữ liệu ERP\n2. Tài liệu API đặc tả\n3. Quy định về quản lý nhập kho của doanh nghiệp\n\n### 6.2. Danh Mục Thuật Ngữ\n- **Ràng buộc nhập**: Điều kiện bắt buộc khi nhập hàng vào kho\n- **Ngoại lệ**: Trường hợp được chấp nhận nhập hàng mặc dù vi phạm ràng buộc\n- **Phiếu nhập kho**: Chứng từ ghi nhận việc nhập hàng vào kho\n- **Mức độ nghiêm trọng**: Phân loại mức độ quan trọng của ràng buộc (cảnh báo/lỗi)\n\n### 6.3. Lịch Sử Thay Đổi Tài Liệu\n\n| Phiên bản | Ngày | Người thực hiện | Mô tả thay đổi |\n|-----------|------|-----------------|---------------|\n| 1.0 | 25/07/2023 | Auto Generated | Tạo tài liệu ban đầu |"])</script><script>self.__next_f.push([1,"9:[\"slug\",\"erp/PUR_005_Quan_Ly_Rang_Buoc_Nhap\",\"c\"]\nf:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"X5KF-BjlTdL2YCafX7ACW\",\"assetPrefix\":\"/erp-docs\",\"initialCanonicalUrl\":\"/erp/PUR_005_Quan_Ly_Rang_Buoc_Nhap/\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"erp/PUR_005_Quan_Ly_Rang_Buoc_Nhap\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"erp\\\",\\\"PUR_005_Quan_Ly_Rang_Buoc_Nhap\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"erp/PUR_005_Quan_Ly_Rang_Buoc_Nhap\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"$L5\",null,{\"children\":[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-2\",\"children\":\"$undefined\"}],\"$undefined\",\"$undefined\"]}],[\"$\",\"$L6\",null,{\"content\":\"$7\"}]]}]}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__className_985585\",\"children\":[\"$\",\"$Lb\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Ld\"],\"globalErrorComponent\":\"$e\",\"missingSlots\":\"$Wf\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"undefined | ERP Documentation\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"documentation,ERP,technical,mermaid,markdown\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>