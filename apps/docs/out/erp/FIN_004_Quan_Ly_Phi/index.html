<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/erp-docs/_next/static/css/4b73dfd0f7bdc629.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js"/><script src="/erp-docs/_next/static/chunks/7384d974-8b753aa07a0575a2.js" async=""></script><script src="/erp-docs/_next/static/chunks/381-1b6d0728bba7b8e7.js" async=""></script><script src="/erp-docs/_next/static/chunks/main-app-5d87a2fd0f4f2f33.js" async=""></script><script src="/erp-docs/_next/static/chunks/d550ec10-485e3f71f5def856.js" async=""></script><script src="/erp-docs/_next/static/chunks/993-1b6a71072be86da4.js" async=""></script><script src="/erp-docs/_next/static/chunks/410-1ece2fcedd156d2f.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js" async=""></script><script src="/erp-docs/_next/static/chunks/app/layout-b6ef60bec0ff2cf2.js" async=""></script><title>undefined | ERP Documentation</title><meta name="keywords" content="documentation,ERP,technical,mermaid,markdown"/><meta name="next-size-adjust"/><script src="/erp-docs/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_985585"><div class="min-h-screen flex items-center justify-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><script src="/erp-docs/_next/static/chunks/webpack-39532e8569213db6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/erp-docs/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[5214,[],\"\"]\n5:I[3040,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"DocLayout\"]\n6:I[1276,[\"135\",\"static/chunks/d550ec10-485e3f71f5def856.js\",\"993\",\"static/chunks/993-1b6a71072be86da4.js\",\"410\",\"static/chunks/410-1ece2fcedd156d2f.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-7978846c0e32abf5.js\"],\"MDXContent\"]\n8:I[6472,[],\"\"]\na:I[9190,[],\"\"]\nb:I[4550,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"ThemeProvider\"]\nc:I[8910,[\"185\",\"static/chunks/app/layout-b6ef60bec0ff2cf2.js\"],\"AuthProvider\"]\ne:I[3013,[],\"\"]\n7:T2408,"])</script><script>self.__next_f.push([1,"# FIN_004_Quản Lý Phí\n\n*Phiên bản: 1.0*  \n*Người tạo: ChatGPT*  \n*Ngày tạo: 13/05/2025*  \n*Cập nhật lần cuối: 13/05/2025*  \n*Người cập nhật: ChatGPT*\n\n## 1. Tổng Quan Nghiệp Vụ\n\n### 1.1. Mô Tả Nghiệp Vụ\nQuy trình Quản Lý Phí là một phần quan trọng trong phân hệ Tài Chính của hệ thống ERP, cho phép doanh nghiệp thiết lập, theo dõi và quản lý các loại phí phát sinh trong hoạt động kinh doanh. Quy trình này bao gồm việc quản lý phí ngân hàng, phí giao dịch và các loại phí khác, giúp doanh nghiệp kiểm soát chi phí hiệu quả.\n\n### 1.2. Phạm Vi Áp Dụng\n- **Phòng Tài Chính**: Quản lý và theo dõi các loại phí\n- **Phòng Kế Toán**: Hạch toán và đối soát phí\n- **Các Bộ Phận**: Đề xuất và sử dụng phí\n- **Ban Lãnh Đạo**: Phê duyệt chính sách phí\n\n### 1.3. Định Nghĩa Thuật Ngữ\n| Thuật ngữ | Định nghĩa |\n|-----------|------------|\n| Phí ngân hàng | Phí phát sinh từ các giao dịch ngân hàng |\n| Nhóm phí | Nhóm các loại phí có cùng tính chất |\n| Chi phí không hợp lệ | Các khoản phí không đủ điều kiện ghi nhận |\n| Bộ phận chịu phí | Bộ phận chịu trách nhiệm về khoản phí |\n\n### 1.4. Tài Liệu Liên Quan\n| STT | Mã tài liệu | Tên tài liệu | Mô tả |\n|-----|-------------|--------------|-------|\n| 1   | FIN_001 | Quản Lý Ngân Hàng | Quy trình quản lý tài khoản ngân hàng |\n| 2   | FIN_002 | Quản Lý Thanh Toán | Quy trình quản lý thanh toán |\n| 3   | ACC_002 | Sổ Cái | Quy trình ghi nhận bút toán |\n\n## 2. Quy Trình Nghiệp Vụ\n\n### 2.1. Tổng Quan Quy Trình\nQuy trình Quản Lý Phí bao gồm các phần chính:\n1. Thiết lập danh mục phí\n2. Phân nhóm và phân loại phí\n3. Thiết lập mức phí\n4. Ghi nhận và theo dõi phí phát sinh\n5. Kiểm soát và phê duyệt phí\n\n### 2.2. Sơ Đồ Quy Trình (Business Flow)\n\n```mermaid\nflowchart TD\n    A[Bắt đầu] --\u003e B[Tạo danh mục phí]\n    B --\u003e C[Phân nhóm phí]\n    C --\u003e D[Thiết lập mức phí]\n    D --\u003e E[Ghi nhận phí phát sinh]\n    E --\u003e F{Kiểm tra hợp lệ}\n    F --\u003e|Hợp lệ| G[Phê duyệt phí]\n    F --\u003e|Không hợp lệ| H[Ghi nhận không hợp lệ]\n    G --\u003e I[Hạch toán phí]\n    H --\u003e J[Yêu cầu điều chỉnh]\n    J --\u003e E\n    I --\u003e K[Kết thúc]\n```\n\n### 2.3. Chi Tiết Các Bước Quy Trình\n\n#### 2.3.1. Thiết Lập Danh Mục Phí\n- **Mô tả**: Tạo và quản lý danh mục các loại phí\n- **Đầu vào**: \n  - Mã phí\n  - Tên phí\n  - Loại phí\n  - Mô tả phí\n- **Đầu ra**: Danh mục phí được thiết lập\n- **Người thực hiện**: Quản trị viên tài chính\n- **Điều kiện tiên quyết**: Có quyền quản lý phí\n- **Xử lý ngoại lệ**: Kiểm tra trùng mã phí\n\n#### 2.3.2. Ghi Nhận và Phê Duyệt Phí\n- **Mô tả**: Ghi nhận và phê duyệt các khoản phí phát sinh\n- **Đầu vào**: \n  - Thông tin phí phát sinh\n  - Thời gian phát sinh\n  - Bộ phận chịu phí\n- **Đầu ra**: Phí được ghi nhận và phê duyệt\n- **Người thực hiện**: Kế toán viên\n- **Điều kiện tiên quyết**: Có danh mục phí\n- **Xử lý ngoại lệ**: Kiểm tra tính hợp lệ của phí\n\n### 2.4. Sơ Đồ Tuần Tự (Sequence Diagram)\n\n```mermaid\nsequenceDiagram\n    participant U as Người dùng\n    participant F as Quản lý Phí\n    participant V as Kiểm tra hợp lệ\n    participant A as Phê duyệt\n    \n    U-\u003e\u003eF: Tạo khoản phí\n    F-\u003e\u003eV: Kiểm tra hợp lệ\n    V--\u003e\u003eF: Kết quả kiểm tra\n    alt Hợp lệ\n        F-\u003e\u003eA: Gửi phê duyệt\n        A--\u003e\u003eF: Xác nhận phê duyệt\n        F--\u003e\u003eU: Thông báo thành công\n    else Không hợp lệ\n        F--\u003e\u003eU: Thông báo lỗi\n    end\n```\n\n### 2.5. Luồng Nghiệp Vụ Thay Thế\n1. **Xử lý phí không hợp lệ**:\n   - Ghi nhận lý do không hợp lệ\n   - Yêu cầu bổ sung chứng từ\n   - Điều chỉnh thông tin\n   - Gửi lại phê duyệt\n\n2. **Điều chỉnh mức phí**:\n   - Đề xuất điều chỉnh\n   - Phê duyệt thay đổi\n   - Cập nhật mức phí mới\n   - Thông báo các bên liên quan\n\n## 3. Yêu Cầu Chức Năng\n\n### 3.1. Danh Sách Chức Năng\n\n| STT | Mã chức năng | Tên chức năng | Mô tả | Độ ưu tiên |\n|-----|--------------|---------------|-------|------------|\n| 1   | FEE_001 | Quản lý danh mục phí | Quản lý thông tin các loại phí | Cao |\n| 2   | FEE_002 | Quản lý nhóm phí | Quản lý các nhóm phí | Cao |\n| 3   | FEE_003 | Ghi nhận phí | Ghi nhận và theo dõi phí phát sinh | Cao |\n| 4   | FEE_004 | Báo cáo phí | Xuất báo cáo tổng hợp phí | Trung bình |\n\n### 3.2. Chi Tiết Chức Năng\n\n#### 3.2.1. FEE_001: Quản lý danh mục phí\n- **Mô tả**: Quản lý thông tin các loại phí\n- **Đầu vào**: Thông tin phí\n- **Đầu ra**: Phí được tạo/cập nhật\n- **Điều kiện tiên quyết**: Quyền quản lý phí\n- **Luồng xử lý chính**:\n  1. Nhập thông tin phí\n  2. Kiểm tra tính hợp lệ\n  3. Lưu vào hệ thống\n- **Luồng xử lý thay thế/ngoại lệ**:\n  1. Kiểm tra trùng mã\n  2. Xử lý lỗi validate\n- **Giao diện liên quan**: Màn hình quản lý phí\n\n## 4. Thiết Kế Kỹ Thuật\n\n### 4.1. Kiến Trúc Hệ Thống\n\n```mermaid\nflowchart TD\n    A[Web Interface] --\u003e B[API Gateway]\n    B --\u003e C[Fee Service]\n    B --\u003e D[Bank Fee Service]\n    B --\u003e E[Invalid Fee Service]\n    C --\u003e F[(Database)]\n    D --\u003e F\n    E --\u003e F\n```\n\n### 4.2. API Endpoints\n\n#### 4.2.1. Quản Lý Phí\n- **Mô tả**: API quản lý phí\n- **URL**: \n  - `GET /api/v1/fees/`\n  - `POST /api/v1/fees/`\n  - `PUT /api/v1/fees/{uuid}/`\n  - `DELETE /api/v1/fees/{uuid}/`\n\n#### 4.2.2. Quản Lý Phí Ngân Hàng\n- **Mô tả**: API quản lý phí ngân hàng\n- **URL**:\n  - `GET /api/v1/bank-fees/`\n  - `POST /api/v1/bank-fees/`\n  - `PUT /api/v1/bank-fees/{uuid}/`\n  - `DELETE /api/v1/bank-fees/{uuid}/`\n\n### 4.3. Service Logic\n\n#### 4.3.1. Fee Service\n- **Mô tả**: Xử lý logic phí\n- **Chức năng chính**:\n  1. Quản lý danh mục phí\n  2. Xử lý phí phát sinh\n  3. Kiểm tra hợp lệ\n- **Các dependencies**:\n  1. Database Service\n  2. Validation Service\n  3. Notification Service\n- **Sơ đồ luồng xử lý**:\n\n```mermaid\nflowchart TD\n    A[Nhận request] --\u003e B[Validate dữ liệu]\n    B --\u003e C{Dữ liệu hợp lệ?}\n    C --\u003e|Có| D[Xử lý nghiệp vụ]\n    C --\u003e|Không| E[Trả về lỗi]\n    D --\u003e F[Lưu vào DB]\n    F --\u003e G[Gửi thông báo]\n    G --\u003e H[Trả về kết quả]\n    E --\u003e H\n```\n\n### 4.4. Mô Hình Dữ Liệu\n\n#### 4.4.1. Entity Relationship Diagram (ERD)\n\n```mermaid\nerDiagram\n    PHI ||--o{ NHOM_PHI : belongs_to\n    PHI ||--o{ BO_PHAN : used_by\n    PHI {\n        uuid id\n        string ma_phi\n        string ten_phi\n        string ten_khac\n        uuid nhom_phi_1\n        uuid nhom_phi_2\n        uuid nhom_phi_3\n        uuid bo_phan\n        boolean trang_thai\n    }\n    NHOM_PHI {\n        uuid id\n        string ma_nhom\n        string ten_phan_nhom\n        string ten_2\n        boolean trang_thai\n    }\n    BO_PHAN {\n        uuid id\n        string ma_bp\n        string ten_bp\n        boolean trang_thai\n    }\n```\n\n#### 4.4.2. Chi Tiết Bảng Dữ Liệu\n\n##### Bảng: PHI\n- **Mô tả**: Lưu trữ thông tin phí\n- **Các trường chính**:\n  - id: UUID (Khóa chính)\n  - ma_phi: VARCHAR(50)\n  - ten_phi: VARCHAR(255)\n  - trang_thai: BOOLEAN\n\n##### Bảng: NHOM_PHI\n- **Mô tả**: Lưu trữ thông tin nhóm phí\n- **Các trường chính**:\n  - id: UUID (Khóa chính)\n  - ma_nhom: VARCHAR(50)\n  - ten_phan_nhom: VARCHAR(255)\n  - trang_thai: BOOLEAN\n\n## 5. Kế Hoạch Kiểm Thử\n\n### 5.1. Phạm Vi Kiểm Thử\n- Kiểm thử tạo/sửa/xóa phí\n- Kiểm thử phân nhóm phí\n- Kiểm thử ghi nhận phí\n- Kiểm thử báo cáo phí\n\n### 5.2. Kịch Bản Kiểm Thử\n\n| STT | Mã kịch bản | Tên kịch bản | Mô tả | Điều kiện tiên quyết | Các bước | Kết quả mong đợi |\n|-----|------------|--------------|-------|---------------------|----------|-----------------|\n| 1   | TC001 | Tạo phí | Tạo mới phí | Đăng nhập admin | 1. Nhập thông tin\u003cbr\u003e2. Submit form | Tạo thành công |\n| 2   | TC002 | Ghi nhận phí | Ghi nhận phí phát sinh | Có danh mục phí | 1. Chọn loại phí\u003cbr\u003e2. Nhập số tiền\u003cbr\u003e3. Submit | Ghi nhận thành công |\n\n## 6. Phụ Lục\n\n### 6.1. Danh Sách Tài Liệu Tham Khảo\n1. Tài liệu thiết kế hệ thống ERP\n2. Quy định về quản lý phí\n3. Chuẩn mực kế toán về chi phí\n\n### 6.2. Danh Mục Thuật Ngữ\n- ERP: Enterprise Resource Planning\n- API: Application Programming Interface\n- UUID: Universally Unique Identifier\n\n### 6.3. Lịch Sử Thay Đổi Tài Liệu\n\n| Phiên bản | Ngày | Người thực hiện | Mô tả thay đổi |\n|-----------|------|-----------------|---------------|\n| 1.0 | 13/05/2025 | ChatGPT | Tạo mới tài liệu |\n"])</script><script>self.__next_f.push([1,"9:[\"slug\",\"erp/FIN_004_Quan_Ly_Phi\",\"c\"]\nf:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/erp-docs/_next/static/css/4b73dfd0f7bdc629.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"X5KF-BjlTdL2YCafX7ACW\",\"assetPrefix\":\"/erp-docs\",\"initialCanonicalUrl\":\"/erp/FIN_004_Quan_Ly_Phi/\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"erp/FIN_004_Quan_Ly_Phi\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"erp\\\",\\\"FIN_004_Quan_Ly_Phi\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"erp/FIN_004_Quan_Ly_Phi\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"$L5\",null,{\"children\":[\"$\",\"article\",null,{\"className\":\"prose prose-slate dark:prose-invert max-w-none\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-2\",\"children\":\"$undefined\"}],\"$undefined\",\"$undefined\"]}],[\"$\",\"$L6\",null,{\"content\":\"$7\"}]]}]}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__className_985585\",\"children\":[\"$\",\"$Lb\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Ld\"],\"globalErrorComponent\":\"$e\",\"missingSlots\":\"$Wf\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"undefined | ERP Documentation\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"documentation,ERP,technical,mermaid,markdown\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>